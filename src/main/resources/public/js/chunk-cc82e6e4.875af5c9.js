(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc82e6e4"],{"07ce":function(t,e,r){},"0e8f":function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return i}),r.d(e,"d",function(){return s}),r.d(e,"e",function(){return d}),r.d(e,"f",function(){return l}),r.d(e,"h",function(){return u}),r.d(e,"i",function(){return p}),r.d(e,"j",function(){return c}),r.d(e,"g",function(){return m});var n=r("b775"),a=function(t){return n["a"].get("/api/department/".concat(t))},o=function(t){return n["a"].get("/api/department/".concat(t,"/details"))},i=function(){return n["a"].get("/api/department")},s=function(t){return n["a"].get("/api/department/".concat(t,"/positions"))},d=function(t){return n["a"].get("/api/department/".concat(t,"/subordinates"))},l=function(t,e){return n["a"].get("/api/department/".concat(t,"/statistics"),{params:{period:e}})},u=function(t,e){return n["a"].post("/api/department",e,{params:{departmentId:t}})},p=function(t){return n["a"].post("/api/department/shutdown","",{params:{departmentId:t}})},c=function(t,e){return n["a"].post("/api/department/update",e,{params:{departmentId:t}})},m=function(t,e){return n["a"].get("/api/department/admin",{params:{entityType:t,entityId:e}})}},"2bd7":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",[r("department-view",{attrs:{department:t.department},on:{"go-to":function(e){return t.refreshData(e)}}}),r("Divider"),t.department&&t.isAdmin?r("Row",{attrs:{type:"flex",justify:"space-between"}},[r("Col",[r("ButtonGroup",[r("Button",{attrs:{type:"primary",to:{name:"DepartmentUpdate",query:{departmentId:t.$route.params.id}}}},[t._v("编辑信息")]),r("Button",{attrs:{disabled:!t.department.status,to:{name:"DepartmentSetup",query:{departmentId:t.$route.params.id}}}},[t._v("添加下级")]),r("Button",{attrs:{disabled:!t.department.status,to:{name:"PositionSetup",query:{departmentId:t.$route.params.id}}}},[t._v("添加岗位")])],1)],1),r("Col",[r("Button",{attrs:{disabled:!t.department.status,type:"error"},on:{click:function(e){t.modal=!0}}},[t._v("撤销")])],1)],1):t._e(),r("Modal",{attrs:{title:"撤销部门","footer-hide":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("Alert",{attrs:{type:"error","show-icon":""}},[t._v("\n      确认要删除部门？\n      "),r("template",{slot:"desc"},[t._v("此操作不可恢复")])],2),r("Divider"),r("Button",{attrs:{long:"",type:"error"},on:{click:t.shutdownDepartment}},[t._v("撤销")])],1)],1)},a=[],o=(r("a481"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.department?r("div",[r("Divider",{attrs:{orientation:"left"}},[t._v("部门信息")]),r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"24"}},[r("div",[r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("名称")])]),r("Col",[t._v(t._s(t._f("formatEntity")(t.department)))])],1),r("br"),r("Row",{attrs:{type:"flex",gutter:10,align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("全称")])]),r("Col",[t._v(t._s(t.department.fullname))]),r("Col",[r("Button",{attrs:{size:"small",icon:"md-git-branch",to:{name:"Management",query:{departmentId:t.department.id}}}})],1)],1),r("br"),r("Row",{attrs:{type:"flex",gutter:10,align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("上级部门")])]),r("Col",[t._v(t._s(t._f("formatEntity")(t.department.administration)))]),t.department.administration?r("Col",[r("ButtonGroup",{attrs:{size:"small"}},[r("Button",{attrs:{icon:"md-git-branch",to:{name:"Management",query:{departmentId:t.department.administration.id}}}}),r("Button",{attrs:{type:"primary",icon:"md-arrow-forward"},on:{click:function(e){return t.$emit("go-to",t.department.administration.id)}}})],1)],1):t._e()],1),r("br"),r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("编号")])]),r("Col",[t._v(t._s(t.department.id))])],1),r("br"),r("Row",{attrs:{type:"flex",align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("状态")])]),r("Col",[r("Tag",{attrs:{color:t.statusColor}},[t._v("\n              "+t._s(t.statusText)+"\n            ")])],1)],1),r("br"),r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("描述")])]),r("Col",[t._v(t._s(t.department.description))])],1),r("br"),r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("设立时间")])]),r("Col",[t._v(t._s(t._f("formatDate")(t.department.createdAt)))])],1),r("br"),r("Row",{attrs:{type:"flex",align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("审批文件")])]),r("Col",[r("Button",{attrs:{size:"small",type:"primary",disabled:!t.department.resource},on:{click:t.download}},[t._v("下载")])],1)],1),r("br"),r("Row",{attrs:{type:"flex",align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("员工人数")])]),r("Col",[r("Tag",[t._v(t._s(t.department.countEmployees))])],1)],1),r("br"),r("Row",{attrs:{type:"flex",align:"middle"}},[r("Col",{attrs:{span:"3"}},[r("label",[t._v("岗位数量")])]),r("Col",[r("Tag",[t._v(t._s(t.department.countPositions))])],1)],1),r("br")],1)])],1),r("br"),r("Row",{attrs:{type:"flex",gutter:25}},[r("Col",{attrs:{span:"12"}},[r("div",[r("Divider",{attrs:{orientation:"left"}},[t._v("下设部门")]),t.department.subordinates.length>0?r("div",t._l(t.department.subordinates,function(e){return r("div",[r("Row",{attrs:{type:"flex",gutter:10,align:"middle"}},[r("Col",[r("ButtonGroup",{attrs:{size:"small"}},[r("Button",{attrs:{icon:"md-git-branch",to:{name:"Management",query:{departmentId:e.id}}}}),r("Button",{attrs:{icon:"md-arrow-forward",type:"primary"},on:{click:function(r){return t.$emit("go-to",e.id)}}})],1)],1),r("Col",[t._v(t._s(t._f("formatEntity")(e)))])],1),r("br")],1)}),0):r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n            无信息\n            "),r("template",{slot:"desc"},[t._v("\n              当前部门没有下级部门\n            ")])],2)],1)],1)]),r("Col",{attrs:{span:"12"}},[r("div",[r("Divider",{attrs:{orientation:"left"}},[t._v("下设岗位")]),t.department.positions.length>0?r("div",t._l(t.department.positions,function(e){return r("div",[r("Row",{attrs:{type:"flex",gutter:10}},[r("Col",[r("Button",{attrs:{type:"primary",size:"small",icon:"md-arrow-forward",to:{name:"PositionDetails",params:{id:e.id}}}})],1),r("Col",[t._v(t._s(t._f("formatEntity")(e)))])],1),r("br")],1)}),0):r("div",[r("Alert",{attrs:{"show-icon":""}},[t._v("\n            无信息\n            "),r("template",{slot:"desc"},[t._v("\n              当前部门没有设置岗位\n            ")])],2)],1)],1)])],1)],1):t._e()}),i=[],s=r("6c6e"),d=r("8454"),l={name:"DepartmentView",props:["department"],computed:{statusText:function(){return this.department.status?"启用":"已撤销"},statusColor:function(){return this.department.status?"success":"error"}},filters:{formatDate:d["b"],formatEntity:d["e"]},methods:{download:function(){Object(s["a"])(this.department.resource.id)}}},u=l,p=(r("3c55"),r("2877")),c=Object(p["a"])(u,o,i,!1,null,"cf2d0044",null),m=c.exports,f=r("0e8f"),v=r("ed08"),_={components:{DepartmentView:m},inject:["reload"],data:function(){return{modal:!1,department:null,isAdmin:Object(v["c"])(["ADMIN"])}},mounted:function(){this.refreshData(this.$route.params.id)},methods:{shutdownDepartment:function(){var t=this,e=this.department.id;Object(f["i"])(e).then(function(e){t.$Notice.success({title:"撤销部门成功"}),t.department.status=!1}).catch(function(e){var r="无法撤销",n=e.data.message;t.$Notice.error({title:r,desc:n})}),this.modal=!1},refreshData:function(t){var e=this;this.$router.replace({name:"DepartmentDetails",params:{id:t}}),Object(f["b"])(t).then(function(t){return e.department=t.data})}}},b=_,h=Object(p["a"])(b,n,a,!1,null,"497ae750",null);e["default"]=h.exports},"3c55":function(t,e,r){"use strict";var n=r("07ce"),a=r.n(n);a.a},a481:function(t,e,r){"use strict";var n=r("cb7c"),a=r("4bf8"),o=r("9def"),i=r("4588"),s=r("0390"),d=r("5f1b"),l=Math.max,u=Math.min,p=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,function(t,e,r,v){return[function(n,a){var o=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,o,a):r.call(String(o),n,a)},function(t,e){var a=v(r,t,this,e);if(a.done)return a.value;var p=n(t),c=String(this),m="function"===typeof e;m||(e=String(e));var b=p.global;if(b){var h=p.unicode;p.lastIndex=0}var g=[];while(1){var y=d(p,c);if(null===y)break;if(g.push(y),!b)break;var w=String(y[0]);""===w&&(p.lastIndex=s(c,o(p.lastIndex),h))}for(var C="",x=0,D=0;D<g.length;D++){y=g[D];for(var $=String(y[0]),B=l(u(i(y.index),c.length),0),R=[],I=1;I<y.length;I++)R.push(f(y[I]));var k=y.groups;if(m){var A=[$].concat(R,B,c);void 0!==k&&A.push(k);var j=String(e.apply(void 0,A))}else j=_($,c,B,R,k,e);B>=x&&(C+=c.slice(x,B)+j,x=B+$.length)}return C+c.slice(x)}];function _(t,e,n,o,i,s){var d=n+t.length,l=o.length,u=m;return void 0!==i&&(i=a(i),u=c),r.call(s,u,function(r,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(d);case"<":s=i[a.slice(1,-1)];break;default:var u=+a;if(0===u)return r;if(u>l){var c=p(u/10);return 0===c?r:c<=l?void 0===o[c-1]?a.charAt(1):o[c-1]+a.charAt(1):r}s=o[u-1]}return void 0===s?"":s})}})}}]);
//# sourceMappingURL=chunk-cc82e6e4.875af5c9.js.map