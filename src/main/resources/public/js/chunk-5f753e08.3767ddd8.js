(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f753e08"],{"0e8f":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return i}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"i",function(){return u}),a.d(t,"j",function(){return p}),a.d(t,"g",function(){return f});var n=a("b775"),r=function(e){return n["a"].get("/api/department/".concat(e))},o=function(e){return n["a"].get("/api/department/".concat(e,"/details"))},l=function(){return n["a"].get("/api/department")},i=function(e){return n["a"].get("/api/department/".concat(e,"/positions"))},s=function(e){return n["a"].get("/api/department/".concat(e,"/subordinates"))},c=function(e,t){return n["a"].get("/api/department/".concat(e,"/statistics"),{params:{period:t}})},d=function(e,t){return n["a"].post("/api/department",t,{params:{departmentId:e}})},u=function(e){return n["a"].post("/api/department/shutdown","",{params:{departmentId:e}})},p=function(e,t){return n["a"].post("/api/department/update",t,{params:{departmentId:e}})},f=function(e,t){return n["a"].get("/api/department/admin",{params:{entityType:e,entityId:t}})}},"2efd":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.employee?a("div",[a("Row",{attrs:{type:"flex",gutter:25,align:"middle"}},[a("Col",{attrs:{span:"16"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("基础信息")]),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("姓名")])]),a("Col",[e._v(e._s(e.employee.name))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("编号")])]),a("Col",[e._v(e._s(e.employee.id))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("性别")])]),a("Col",[e._v(e._s(e.employee.gender))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("证件号码")])]),a("Col",[e._v(e._s(e.employee.credential))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("出生日期")])]),a("Col",[e._v(e._s(e._f("formatDate")(e.employee.birth)))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("年龄")])]),a("Col",[e._v(e._s(e.age))])],1)],1)]),a("Col",{attrs:{span:"8"}},[e.avatarUrl?[a("div",{staticClass:"avatar-container"},[a("img",{staticClass:"avatar-image",attrs:{src:e.avatarUrl}})]),a("div",{staticStyle:{"text-align":"center"}},[a("br"),a("span",[e._v("个人照片")])])]:[a("div",{staticClass:"avatar-container"},[a("Alert",{attrs:{"show-icon":""}},[a("template",{slot:"desc"},[e._v("无个人照片")])],2)],1)]],2)],1),a("br"),a("Row",{attrs:{type:"flex",gutter:25}},[a("Col",{attrs:{span:"12"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("任职信息")]),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("入职时间")])]),a("Col",[e._v(e._s(e._f("formatDate")(e.employee.entryTime)))])],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("当前状态")])]),a("Col",[a("Tag",{attrs:{color:e.employee.status?"success":"error"}},[e._v("\n              "+e._s(e.employee.status?"在职":"离职")+"\n            ")])],1)],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("司龄")])]),a("Col",[a("Tag",[e._v(e._s(e.servingAge))])],1)],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("当前职务")])]),e.employee.mainPosition?a("Col",{attrs:{span:"20"}},[a("Row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[a("Col",[a("Tag",{attrs:{color:"success"}},[e._v("\n                  "+e._s(e._f("formatPosition")(e.employee.mainPosition))+"\n                ")])],1),a("Col",[a("Button",{attrs:{type:"primary",size:"small",icon:"md-arrow-forward",to:{name:"PositionDetails",params:{id:e.employee.mainPosition.id}}}})],1)],1)],1):e._e()],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("薪资级别")])]),e.employee.scale?a("Col",{attrs:{span:"20"}},[a("Tag",{attrs:{color:"primary"}},[e._v("\n              "+e._s(e._f("formatScale")(e.employee.scale))+"\n            ")])],1):e._e()],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("招聘方式")])]),a("Col",[e._v(e._s(e.employee.recruitment))])],1)],1)]),a("Col",{attrs:{span:"12"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("联系方式")]),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("住址")])]),a("Col",[e._v(e._s(e.employee.address))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("电子邮箱")])]),a("Col",[e._v(e._s(e.employee.email))])],1),a("br"),a("Row",{attrs:{type:"flex",gutter:10}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("手机号码")])]),e.employee.phoneNumbers.length>0?a("Col",{attrs:{span:"8"}},[a("Collapse",[a("Panel",[a("span",[e._v(e._s(e.employee.phoneNumbers[0]))]),a("template",{slot:"content"},[a("br"),e._l(e.employee.phoneNumbers,function(t){return a("div",[a("p",[a("Icon",{attrs:{type:"md-call"}}),e._v("\n                      "+e._s(t)+"\n                    ")],1),a("br")])})],2)],2)],1)],1):e._e()],1),a("br")],1)])],1),a("br"),a("Row",{attrs:{type:"flex",gutter:25}},[a("Col",{attrs:{span:"12"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("教育信息")]),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("学历")])]),a("Col",[e._v(e._s(e.employee.education))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("毕业院校")])]),a("Col",[e._v(e._s(e.employee.college))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("专业")])]),a("Col",[e._v(e._s(e.employee.major))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("毕业时间")])]),a("Col",[e._v(e._s(e._f("formatDate")(e.employee.graduateTime)))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("学位")])]),a("Col",[e._v(e._s(e.employee.degree))])],1)],1)]),a("Col",{attrs:{span:"12"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("其他信息")]),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("婚姻状态")])]),a("Col",[e._v(e._s(e.employee.marriage))])],1),a("br"),a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("label",[e._v("政治面貌")])]),a("Col",[e._v(e._s(e.employee.politicalStatus))])],1)],1)])],1),a("br"),a("Row",{attrs:{type:"flex",gutter:25}},[a("Col",{attrs:{span:"12"}},[a("div",[a("Divider",{attrs:{orientation:"left"}},[e._v("附件")]),a("Collapse",[a("Panel",[e._v("\n            下载文件\n            "),e.attachments.length?a("div",{attrs:{slot:"content"},slot:"content"},[e._l(e.attachments,function(t){return[a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:"6"}},[a("label",[e._v(e._s(t.type))])]),a("Col",[a("Button",{attrs:{icon:"md-download",size:"small"},on:{click:function(a){return e.download(t.resource.id)}}})],1)],1),a("br")]})],2):a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              无附件\n            ")])])],1)],1)])],1),a("Divider"),a("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",[a("ButtonGroup",[a("Button",{attrs:{to:{name:"EmployeeUpdate",query:{employeeId:e.employeeId}}}},[e._v("更新个人信息")]),e.isAdmin?a("Button",{attrs:{disabled:!e.employee.status,type:"primary",to:{name:"EmployeeAdjustment",query:{employeeId:e.employeeId}}}},[e._v("调整职务/薪级\n        ")]):e._e()],1)],1),e.isAdmin?a("Col",[e.employee.status?[a("Button",{attrs:{type:"error"},on:{click:function(t){e.dischargeModal=!0}}},[e._v("解除聘用")])]:[a("Button",{attrs:{type:"success"},on:{click:e.restore}},[e._v("恢复聘用")])]],2):e._e()],1),a("Modal",{attrs:{title:"解除聘用","footer-hide":!0},model:{value:e.dischargeModal,callback:function(t){e.dischargeModal=t},expression:"dischargeModal"}},[a("simple-change-form",{ref:"dischargeForm"}),a("br"),a("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("\n      警告\n      "),a("template",{slot:"desc"},[e._v("\n        该操作将会解除员工当前职务和撤销其薪资级别\n      ")])],2),a("Button",{attrs:{long:"",type:"error"},on:{click:e.discharge}},[e._v("解除聘用")])],1)],1):e._e()},r=[],o=(a("7514"),a("ef75")),l=a("edc0"),i=a("1a4e"),s=a("6c6e"),c=a("8454"),d=a("ed08"),u={name:"EmployeeProfile",components:{SimpleChangeForm:i["a"]},props:["employeeId"],inject:["reload"],data:function(){return{isAdmin:Object(d["c"])(["ADMIN"]),employee:null,dischargeModal:!1,attachments:[]}},computed:{servingAge:function(){var e=Object(l["a"])(this.employee.entryTime,new Date),t=e.year,a=e.month,n=e.day;return"".concat(t,"年 ").concat(a,"个月 ").concat(n,"日")},age:function(){return Object(l["a"])(this.employee.birth,new Date).year},avatarUrl:function(){var e=this.attachments.find(function(e){return"个人照片"===e.type});return e&&Object(s["b"])(e.resource.id)}},mounted:function(){var e=this;Object(o["g"])(this.employeeId).then(function(t){return e.employee=t.data}),Object(o["e"])(this.employeeId).then(function(t){e.attachments=t.data})},methods:{discharge:function(){var e=this;this.dischargeModal=!1;var t=this.$refs.dischargeForm.getFormData(),a=this.employeeId;Object(o["c"])(a,t).then(function(t){e.$Notice.success({title:"解除聘用成功(员工编号".concat(a,")")}),e.reload()}).catch(function(t){return e.$Notice.error({title:"解除聘用失败(".concat(t.status,")"),desc:t.data.message})})},download:function(e){Object(s["a"])(e)},restore:function(){var e=this;Object(o["k"])(this.employeeId).then(function(t){e.$Notice.success({title:"恢复聘用成功"}),e.reload()}).catch(function(t){return e.$Notice.error({title:"恢复聘用失败".concat(t.status),desc:t.data.message})})}},filters:{formatDate:c["b"],formatScale:c["h"],formatPosition:c["e"]}},p=u,f=(a("f194"),a("2877")),m=Object(f["a"])(p,n,r,!1,null,"423b50fc",null);t["a"]=m.exports},"3fdc":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"form",attrs:{"label-width":100,"label-position":"left",model:e.formData,rules:e.ruleValidate}},[a("FormItem",{attrs:{label:"新密码",prop:"update"}},[a("Input",{attrs:{type:"password"},model:{value:e.formData.update,callback:function(t){e.$set(e.formData,"update",t)},expression:"formData.update"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),a("FormItem",{attrs:{label:"再次输入",prop:"repeat"}},[a("Input",{attrs:{type:"password"},model:{value:e.formData.repeat,callback:function(t){e.$set(e.formData,"repeat",t)},expression:"formData.repeat"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1)],1),a("Divider"),a("Button",{attrs:{type:"success",disabled:!e.formData.repeat||!e.formData.update},on:{click:e.onOk}},[e._v("确定")])],1)},r=[],o=a("2934"),l={name:"PasswordForm",props:{isAdmin:{type:Boolean,default:!0}},data:function(){var e=this;return{formData:e.emptyForm(),ruleValidate:{update:[{required:!0,message:"请输入新密码（长度不小于6）",trigger:"blur",min:6}],repeat:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:e.validateRepeat}]}}},methods:{emptyForm:function(){return{update:null,repeat:null}},reset:function(){this.formData=this.emptyForm()},onOk:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=e.formData.update;e.$emit("on-form-ready",Object(o["b"])({update:a}))}else e.$Notice.error({title:"表单无效",desc:"请检查你的输入"})})},validateRepeat:function(e,t,a){this.formData.update!==t?a(new Error("两次输入不相同")):a()}}},i=l,s=a("2877"),c=Object(s["a"])(i,n,r,!1,null,"2db26288",null);t["a"]=c.exports},"4f7d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("adjustment-table",{attrs:{"load-data":e.loadData,"use-operations":e.isAdmin}},[e.isAdmin?a("Button",{attrs:{type:"primary",to:{name:"EmployeeAdjustment",query:{employeeId:e.employeeId}}}},[e._v("调整职务/薪级\n  ")]):e._e()],1)},r=[],o=(a("c5f6"),a("ef75")),l=a("fdf9"),i=a("ed08"),s={name:"AdjustmentHistory",components:{AdjustmentTable:l["a"]},props:{employeeId:{type:Number|String,default:null}},data:function(){return{isAdmin:Object(i["c"])(["ADMIN"])}},methods:{loadData:function(e,t,a){var n=this;Object(o["d"])(this.employeeId,e,t).then(function(e){var t=e.data,n=t.content,r=t.totalElements;a(n,r)}).catch(function(e){return n.$Notice.error({title:"获取调整历史失败",desc:e.data.message})})}}},c=s,d=a("2877"),u=Object(d["a"])(c,n,r,!1,null,"45fd0556",null);t["a"]=u.exports},"522f":function(e,t,a){"use strict";var n=a("9824"),r=a.n(n);r.a},"6b8c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[a("Col",{staticStyle:{width:"100px"}},[a("label",[e._v("新的部门")])]),e.department?a("Col",[e._v("\n      "+e._s(e.department.name)+"("+e._s(e.department.id)+")\n    ")]):e._e(),a("Col",[a("Button",{on:{click:function(t){e.upModal=!0}}},[e._v(e._s(e.department?"重新选择":"选择部门"))])],1)],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[a("Col",{staticStyle:{width:"100px"}},[a("label",[e._v("新的职务")])]),e.department?a("Col",[a("Select",{attrs:{placeholder:"选择职务"},model:{value:e.toId,callback:function(t){e.toId=t},expression:"toId"}},[e._l(e.department.positions,function(t){return[t.status?a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+" ("+e._s(t.id)+")")]):e._e()]})],2)],1):a("Col",[a("Alert",{staticStyle:{"margin-bottom":"0"},attrs:{"show-icon":""}},[e._v("请先选择部门")])],1)],1),a("br"),a("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[a("Col",{staticStyle:{width:"100px"}},[a("label",[e._v("新的薪级")])]),a("Col",[a("Select",{attrs:{placeholder:"选择薪资级别"},model:{value:e.afterId,callback:function(t){e.afterId=t},expression:"afterId"}},e._l(e.payScales,function(t){return a("Option",{attrs:{value:t.id}},[e._v("级别"+e._s(t.id)+"(￥"+e._s(t.salary)+")")])}),1)],1)],1),a("br"),a("simple-change-form",{ref:"subForm"}),e.useButton?a("div",[a("br"),a("Button",{attrs:{type:"success",disabled:e.afterId===e.beforeId&&e.toId===e.fromId||!e.afterId&&!e.toId},on:{click:e.onOk}},[e._v("确定")])],1):e._e(),a("Modal",{attrs:{title:"选择部门"},model:{value:e.upModal,callback:function(t){e.upModal=t},expression:"upModal"}},[a("department-tree",{on:{"node-select-change":e.onSelectChange}})],1)],1)},r=[],o=(a("6b54"),a("1a4e")),l=a("9f8d"),i=a("0e8f"),s=a("b775"),c=function(){return s["a"].get("/api/scale")},d={name:"AdjustmentForm",components:{DepartmentTree:l["a"],SimpleChangeForm:o["a"]},props:{useButton:{type:Boolean,default:!1},employee:{type:Object,default:function(){return{scale:{id:null},mainPosition:{id:null}}}}},data:function(){return{payScales:[],afterId:null,department:null,upModal:!1,toId:null}},computed:{beforeId:function(){return this.employee.scale.id},fromId:function(){return this.employee.mainPosition.id}},mounted:function(){var e=this;c().then(function(t){return e.payScales=t.data})},methods:{reset:function(){this.$refs.subForm.reset(),this.afterId=null,this.toId=null},onSelectChange:function(e){var t=this;this.reset();var a=e&&e.entity;e.selected&&Object(i["b"])(a.id).then(function(e){t.department=e.data})},onOk:function(){var e=this.$refs.subForm.getFormData();e.append("toId",this.toId||""),e.append("afterId",this.afterId||""),console.log(e.toString()),this.$emit("on-form-ready",e),this.reset()}}},u=d,p=(a("7c05"),a("2877")),f=Object(p["a"])(u,n,r,!1,null,"684bd20a",null);t["a"]=f.exports},"7c05":function(e,t,a){"use strict";var n=a("936f"),r=a.n(n);r.a},"936f":function(e,t,a){},9824:function(e,t,a){},"9f8d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Tree",{ref:"treeComp",attrs:{data:e.data,"load-data":e.loadData},on:{"on-select-change":e.onSelectedChange}})],1)},r=[],o=(a("ac6a"),a("6762"),a("2fdb"),a("5d73")),l=a.n(o),i=a("75fc"),s=(a("7f7f"),a("0e8f")),c={name:"DepartmentTree",props:["initId"],data:function(){return{data:[{title:"parent",loading:!1,children:[],entity:null,expand:!1}]}},computed:{root:function(){return this.data[0]}},mounted:function(){var e=this;Object(s["c"])().then(function(t){var a=t.data;e.root.title=a.name,e.root.entity=a,e.initId?Object(s["a"])(e.initId).then(function(t){var a=t.data;e.expandMounted(e.root,a.hierarchy)}):e.expandMounted(e.root,a.hierarchy)})},methods:{debug:function(){console.log(this.root),console.log(this.$refs.treeComp)},expandMounted:function(e,t){var a=this,n=e.entity,r=n.hierarchy||"/";if(r===t)return this.$set(e,"selected",!0),void this.onSelectedChange([e]);this._loadData(e,function(n){var o;(o=e.children).push.apply(o,Object(i["a"])(n)),e.expand=!0;var s=!0,c=!1,d=void 0;try{for(var u,p=l()(e.children);!(s=(u=p.next()).done);s=!0){var f=u.value,m=r+""+f.entity.id+"/";if(t.includes(m)){a.expandMounted(f,t);break}}}catch(v){c=!0,d=v}finally{try{s||null==p.return||p.return()}finally{if(c)throw d}}})},loadData:function(e,t){this._loadData(e,t)},_loadData:function(e,t){Object(s["e"])(e.entity.id).then(function(e){if(e.data){var a=[],n=e.data||[];n.forEach(function(e){return a.push({title:e.name,loading:!1,children:[],entity:e})}),t(a)}})},onSelectedChange:function(e){var t=e[e.length-1];t&&this._loadData(t,function(){}),this.$emit("node-select-change",t)}}},d=c,u=a("2877"),p=Object(u["a"])(d,n,r,!1,null,"b494006c",null);t["a"]=p.exports},a3cc:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{attrs:{span:"12"}},[a("password-form",{ref:"form",on:{"on-form-ready":e.changePassword}})],1)],1)},r=[],o=a("cebc"),l=a("3fdc"),i=a("ef75"),s=a("2f62"),c=a("ed08"),d={name:"PasswordManage",components:{PasswordForm:l["a"]},props:["employeeId"],inject:["reload"],data:function(){return{isAdmin:Object(c["c"])(["ADMIN"])}},methods:Object(o["a"])({},Object(s["b"])("user",["logOut"]),{changePassword:function(e){var t=this,a=this;Object(i["b"])(a.employeeId,e).then(function(e){a.$Notice.success({title:"重置密码成功",desc:""}),a.isAdmin?(a.$router.push({name:"EmployeePanel",params:{id:a.employeeId},query:{tab:"employee"}}),a.reload()):a.logOut().then(function(e){return a.$router.push({name:"Login"})})}).catch(function(e){return t.$Notice.error({title:"重置密码失败",desc:e.data.message})})}})},u=d,p=a("2877"),f=Object(p["a"])(u,n,r,!1,null,"60f62f76",null);t["a"]=f.exports},a481:function(e,t,a){"use strict";var n=a("cb7c"),r=a("4bf8"),o=a("9def"),l=a("4588"),i=a("0390"),s=a("5f1b"),c=Math.max,d=Math.min,u=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,function(e,t,a,v){return[function(n,r){var o=e(this),l=void 0==n?void 0:n[t];return void 0!==l?l.call(n,o,r):a.call(String(o),n,r)},function(e,t){var r=v(a,e,this,t);if(r.done)return r.value;var u=n(e),p=String(this),f="function"===typeof t;f||(t=String(t));var h=u.global;if(h){var b=u.unicode;u.lastIndex=0}var g=[];while(1){var _=s(u,p);if(null===_)break;if(g.push(_),!h)break;var w=String(_[0]);""===w&&(u.lastIndex=i(p,o(u.lastIndex),b))}for(var C="",x=0,I=0;I<g.length;I++){_=g[I];for(var j=String(_[0]),O=c(d(l(_.index),p.length),0),D=[],k=1;k<_.length;k++)D.push(m(_[k]));var $=_.groups;if(f){var M=[j].concat(D,O,p);void 0!==$&&M.push($);var R=String(t.apply(void 0,M))}else R=y(j,p,O,D,$,t);O>=x&&(C+=p.slice(x,O)+R,x=O+j.length)}return C+p.slice(x)}];function y(e,t,n,o,l,i){var s=n+e.length,c=o.length,d=f;return void 0!==l&&(l=r(l),d=p),a.call(i,d,function(a,r){var i;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":i=l[r.slice(1,-1)];break;default:var d=+r;if(0===d)return a;if(d>c){var p=u(d/10);return 0===p?a:p<=c?void 0===o[p-1]?r.charAt(1):o[p-1]+r.charAt(1):a}i=o[d-1]}return void 0===i?"":i})}})},b5ec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"user-set",attrs:{shadow:""}},[e.employeeId?a("Tabs",{on:{"on-click":e.changeRoute},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("TabPane",{attrs:{label:"员工信息",name:"employee"}},[a("employee-profile",{attrs:{"employee-id":e.employeeId}})],1),a("TabPane",{attrs:{label:"调整历史",name:"adjustment"}},[a("adjustment-history",{attrs:{"employee-id":e.employeeId}})],1),a("TabPane",{attrs:{label:"薪资记录",name:"wage_record"}},[a("wage-manage",{attrs:{"employee-id":e.employeeId}})],1),a("TabPane",{attrs:{label:"合同管理",name:"contract"}},[a("contract-manage",{attrs:{"employee-id":e.employeeId}})],1),a("TabPane",{attrs:{label:"重置密码",name:"password"}},[a("password-manage",{attrs:{"employee-id":e.employeeId}})],1)],1):e._e()],1)},r=[],o=(a("a481"),a("6bda")),l=a("7842"),i=a("2efd"),s=a("6b8c"),c=a("4f7d"),d=a("a3cc"),u={components:{PasswordManage:d["a"],AdjustmentHistory:c["a"],AdjustmentForm:s["a"],EmployeeProfile:i["a"],ContractManage:l["a"],WageManage:o["a"]},data:function(){return{tab:this.$route.query.tab||"employee",employeeId:this.$route.params.id}},methods:{changeRoute:function(){var e=this.tab;this.$router.replace({name:"EmployeePanel",query:{tab:e}})}}},p=u,f=(a("522f"),a("2877")),m=Object(f["a"])(p,n,r,!1,null,"0c3397d4",null);t["default"]=m.exports},e8e3:function(e,t,a){},edc0:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});a("20d6");var n=function(e){return Math.round(100*e)/100},r=function(e,t){var a=[1,3,5,7,8,10,12,4,6,9,11,2],n=new Date(e),r=new Date(t),o=r.getFullYear()-n.getFullYear(),l=r.getMonth()-n.getMonth(),i=r.getDate()-n.getDate();if(l<0&&(o--,l=r.getMonth()+(12-n.getMonth())),i<0){l--;var s,c=a.findIndex(function(e){return e===n.getMonth()+1});s=c<=6?31:c>6&&c<=10?30:28,i=r.getDate()+(s-n.getDate())}return{year:o,month:l,day:i}}},f194:function(e,t,a){"use strict";var n=a("e8e3"),r=a.n(n);r.a},fdf9:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-data",{attrs:{columns:e.columns,"load-data":e.loadData}})},r=[],o=a("f867"),l=a("2db4"),i=a("8454"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{type:"flex",gutter:5}},[a("Col",[a("Button",{attrs:{size:"small",shape:"circle",icon:"md-create"},on:{click:function(t){e.upModal=!0}}})],1),e.record.resource?a("Col",[a("Button",{attrs:{size:"small",shape:"circle",type:"success",icon:"md-download"},on:{click:e.onDownload}})],1):e._e()],1),a("Modal",{attrs:{title:"更新记录","footer-hide":!0},model:{value:e.upModal,callback:function(t){e.upModal=t},expression:"upModal"}},[a("simple-change-form",{attrs:{"use-button":!0,"effective-on":e.record.effectiveOn,description:e.record.description},on:{"on-form-ready":e.onOk}})],1)],1)},c=[],d=a("1a4e"),u=a("6c6e"),p={name:"SimpleChangeOps",components:{SimpleChangeForm:d["a"]},props:{record:{type:Object,default:function(){return{effectiveOn:new Date,description:""}}}},inject:["reload"],data:function(){return{upModal:!1}},methods:{onDownload:function(){Object(u["a"])(this.record.resource.id)},onOk:function(e){this.$emit("on-form-ready",e),this.upModal=!1}}},f=p,m=a("2877"),v=Object(m["a"])(f,s,c,!1,null,"dbda6c26",null),y=v.exports,h=a("ef75"),b={name:"AdjustmentTable",components:{PageData:o["a"]},inject:["reload"],props:{loadData:{type:Function,default:function(){return function(e,t,a){a([],0)}}},useOperations:{type:Boolean,default:!0}},data:function(){var e=this,t=[{title:"序号",key:"id"},{title:"员工",key:"employee",render:function(t,a){var n=a.row;return t("Button",{props:{size:"small"},on:{click:function(){return e.$router.push({name:"EmployeePanel",params:{id:n.employee.id},query:{tab:"adjustment"}})}}},Object(l["a"])(Object(i["e"])(n.employee),5))},exportData:function(e){return Object(i["e"])(e.employee)}},{title:"职务变动",key:"to",render:function(t,a){var n=a.row;return e.renderPosition(t,n.to)},exportData:function(e){return Object(i["e"])(e.to)}},{title:"调整后",key:"after",render:function(e,t){var a=t.row;return e("Tag",Object(i["h"])(a.after))},exportData:function(e){return Object(i["h"])(e.after)}},{title:"描述",key:"description",render:function(e,t){var a=t.row;return e("span",Object(l["a"])(a.description,25))},exportData:function(e){return'"'+e.description+'"'}},{title:"生效日期",key:"effectiveOn",render:function(e,t){var a=t.row;return e("span",Object(i["b"])(a.effectiveOn))},exportData:function(e){return Object(i["b"])(e.effectiveOn)}},{title:"查看",key:"check",render:function(e,t){var a=t.row;return e("Button",{props:{size:"small",icon:"md-download",disabled:!a.resource},on:{click:function(){return downloadResourceApi(a.resource.id)}}})},noExport:!0},{title:"操作",key:"operation",render:function(t,a){var n=a.row;return t(y,{props:{record:n},on:{"on-form-ready":function(t){return Object(h["l"])(n.id,t).then(function(t){e.$Notice.success({title:"更新调整历史成功"}),e.reload()}).catch(function(t){return e.$Notice.error({title:"更新调整历史失败",desc:t.data.message})})}}})},noExport:!0}];return{columns:e.useOperations?t:t.slice(0,-1)}},methods:{renderPosition:function(e,t){var a=this;return t?e("Button",{props:{size:"small",type:"primary"},on:{click:function(){return a.$router.push({name:"PositionDetails",params:{id:t.id}})}}},Object(l["a"])(Object(i["e"])(t),5)):e("span","/")}}},g=b,_=Object(m["a"])(g,n,r,!1,null,"bd25f9bc",null);t["a"]=_.exports}}]);
//# sourceMappingURL=chunk-5f753e08.3767ddd8.js.map