(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e47f0bac"],{"184b":function(t,e,a){},"19e3":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{type:"flex",align:"middle",gutter:8}},[t.labelText?a("Col",{attrs:{span:t.labelSpan}},[a("div",{style:!t.labelSpan&&{width:t.labelWidth+"px"}},[a("span",[t._v(t._s(t.labelText))])])]):t._e(),a("Col",[a("Upload",{ref:"upload",attrs:{"show-upload-list":!1,action:"",accept:t.accept,"before-upload":t.handleUpload}},[a("Button",{attrs:{disabled:t.disabled,icon:"md-arrow-up",type:t.color}},[t._v(t._s(t.buttonHint))])],1)],1),t.file?a("Col",[a("Button",{attrs:{size:"small",icon:"md-close"},on:{click:function(e){t.file=null}}})],1):t._e()],1),t.file&&t.showSelected?a("div",[a("br"),a("Alert",[t._v("已选择文件:"+t._s(t.file.name))])],1):t._e()],1)},n=[],i=(a("c5f6"),{name:"UploadButton",props:{labelText:{type:String,default:"上传文件"},labelWidth:{type:Number,default:50},accept:{type:String,default:".txt"},buttonText:{type:String,default:"选择本地文件"},showSelected:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},labelSpan:{type:Number,default:null},color:{type:String,default:null}},computed:{buttonHint:function(){return this.file?"重新选择":this.buttonText}},data:function(){return{file:null,labelClazz:{width:this.labelWidth}}},methods:{handleUpload:function(t){return this.file=t,this.$emit("on-file-ready",t),!1},reset:function(){this.file=null}}}),r=i,s=a("2877"),l=Object(s["a"])(r,o,n,!1,null,"7487a8df",null);e["a"]=l.exports},"6e6f":function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return r}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return l}),a.d(e,"f",function(){return u});var o=a("b775"),n=function(t,e){return o["a"].post("/api/position",e,{params:{departmentId:t}})},i=function(t){return o["a"].get("/api/position/".concat(t))},r=function(t){return o["a"].get("/api/position/".concat(t,"/details"))},s=function(t,e,a){return o["a"].get("/api/position/".concat(t,"/adjustments"),{params:{page:e,size:a}})},l=function(t){return o["a"].post("/api/position/cancel","",{params:{positionId:t}})},u=function(t,e){return o["a"].post("/api/position/update",e,{params:{positionId:t}})}},"843e5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Divider",{attrs:{orientation:"left"}},[t._v("编辑岗位信息")]),t.position?[a("position-form",{attrs:{position:t.position,"use-button":!0},on:{"on-form-ready":t.updatePosition}})]:t._e()],2)},n=[],i=a("b6e0"),r=a("6e6f"),s={components:{PositionForm:i["a"]},data:function(){return{positionId:this.$route.query.positionId,position:null}},mounted:function(){var t=this;Object(r["c"])(this.positionId).then(function(e){t.position=e.data}).catch(function(e){return t.$Notice.error({title:"获取岗位信息失败".concat(e.status),desc:e.data.message})})},methods:{updatePosition:function(t){var e=this,a=this.positionId;Object(r["f"])(a,t).then(function(t){e.$Notice.success({title:"更新岗位成功"}),e.$router.push({name:"PositionDetails",params:{id:a}})}).catch(function(t){var a="更新岗位失败(".concat(t.status,")"),o=t.data.message;e.$Notice.error({title:a,desc:o})})}}},l=s,u=(a("f8d8"),a("2877")),c=Object(u["a"])(l,o,n,!1,null,"2607cb09",null);e["default"]=c.exports},b6e0:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"form",attrs:{"label-position":"left","label-width":80,model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"职务名称",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"职务类型",prop:"type"}},[a("Select",{attrs:{disabled:!!t.position},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.types,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"编制人数",prop:"expectedCount"}},[a("InputNumber",{model:{value:t.formData.expectedCount,callback:function(e){t.$set(t.formData,"expectedCount",e)},expression:"formData.expectedCount"}})],1),a("FormItem",{attrs:{label:"创建时间",prop:"createdAt"}},[a("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:t.formData.createdAt,callback:function(e){t.$set(t.formData,"createdAt",e)},expression:"formData.createdAt"}})],1),a("FormItem",{attrs:{label:"描述",prop:"description"}},[a("Input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("upload-button",{ref:"upload",attrs:{accept:".doc,.docx","label-width":80},on:{"on-file-ready":function(e){t.formData.file=e}}}),t.useButton?a("div",[a("br"),a("Button",{attrs:{type:"success",disabled:!t.isReady},on:{click:t.onOk}},[t._v("确定")])],1):t._e()],1)},n=[],i=a("cebc"),r=(a("7f7f"),a("2934")),s=a("19e3"),l={name:"PositionForm",components:{UploadButton:s["a"]},props:["position","useButton"],computed:{isReady:function(){return!!this.formData.name&&!!this.formData.createdAt&&!!this.formData.type&&!!this.formData.expectedCount}},data:function(){return{types:["行政","管理","后勤","技术"],ruleValidate:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],type:[{required:!0,message:"请选择职务类型"}],expectedCount:[{required:!0,message:"请输入人数"}],createdAt:[{required:!0,message:"请输入创建时间"}]},formData:Object(i["a"])({},this.defaultForm(),this.position)}},methods:{reset:function(){this.formData=this.defaultForm(),this.$refs.upload.reset()},defaultForm:function(){return{name:null,type:null,expectedCount:1,createdAt:new Date,file:null,description:null}},onOk:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.$emit("on-form-ready",Object(r["b"])(t.formData)),t.reset())})}}},u=l,c=a("2877"),d=Object(c["a"])(u,o,n,!1,null,null,null);e["a"]=d.exports},f8d8:function(t,e,a){"use strict";var o=a("184b"),n=a.n(o);n.a}}]);
//# sourceMappingURL=chunk-e47f0bac.78b92216.js.map