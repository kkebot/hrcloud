(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3139749a"],{"19e3":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:8}},[t.labelText?n("Col",{attrs:{span:t.labelSpan}},[n("div",{style:!t.labelSpan&&{width:t.labelWidth+"px"}},[n("span",[t._v(t._s(t.labelText))])])]):t._e(),n("Col",[n("Upload",{ref:"upload",attrs:{"show-upload-list":!1,action:"",accept:t.accept,"before-upload":t.handleUpload}},[n("Button",{attrs:{disabled:t.disabled,icon:"md-arrow-up",type:t.color}},[t._v(t._s(t.buttonHint))])],1)],1),t.file?n("Col",[n("Button",{attrs:{size:"small",icon:"md-close"},on:{click:function(e){t.file=null}}})],1):t._e()],1),t.file&&t.showSelected?n("div",[n("br"),n("Alert",[t._v("已选择文件:"+t._s(t.file.name))])],1):t._e()],1)},a=[],r=(n("c5f6"),{name:"UploadButton",props:{labelText:{type:String,default:"上传文件"},labelWidth:{type:Number,default:50},accept:{type:String,default:".txt"},buttonText:{type:String,default:"选择本地文件"},showSelected:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},labelSpan:{type:Number,default:null},color:{type:String,default:null}},computed:{buttonHint:function(){return this.file?"重新选择":this.buttonText}},data:function(){return{file:null,labelClazz:{width:this.labelWidth}}},methods:{handleUpload:function(t){return this.file=t,this.$emit("on-file-ready",t),!1},reset:function(){this.file=null}}}),i=r,c=n("2877"),u=Object(c["a"])(i,o,a,!1,null,"7487a8df",null);e["a"]=u.exports},"1a4e":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Form",{ref:"form",attrs:{"label-width":100,"label-position":"left",model:t.formData}},[n("FormItem",{staticClass:"form-label-font",attrs:{label:"生效时间",prop:"effectiveOn"}},[n("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:t.formData.effectiveOn,callback:function(e){t.$set(t.formData,"effectiveOn",e)},expression:"formData.effectiveOn"}})],1),n("FormItem",{staticClass:"form-label-font",attrs:{label:"描述文字",prop:"description"}},[n("Input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),n("upload-button",{ref:"upload",attrs:{accept:".doc,.docx","label-width":100},on:{"on-file-ready":function(e){t.formData.file=e}}}),t.useButton?n("div",[n("br"),n("Button",{attrs:{type:"success"},on:{click:t.onOk}},[t._v("确定")])],1):t._e()],1)},a=[],r=(n("6b54"),n("19e3")),i=n("2934"),c={name:"SimpleChangeForm",components:{UploadButton:r["a"]},props:{useButton:{type:Boolean,default:!1},effectiveOn:{type:String,default:function(){return(new Date).toString()}},description:{type:String,default:""}},data:function(){return{formData:this.defaultForm()}},methods:{defaultForm:function(){return{effectiveOn:new Date(this.effectiveOn),description:this.description,file:null}},reset:function(){this.formData=this.defaultForm(),this.$refs.upload.reset()},getFormData:function(){var t=this.formData;return Object(i["b"])(t)},onOk:function(){this.$emit("on-form-ready",this.getFormData()),this.reset()},debugPrint:function(){var t=this.effectiveOn,e=this.formData;console.log({effectiveOn:t,formData:e})}}},u=c,s=(n("fa80"),n("2877")),l=Object(s["a"])(u,o,a,!1,null,"952f6d5e",null);e["a"]=l.exports},2105:function(t,e,n){},"2db4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(t,e){return!t||t.length<=e?t||"":t.slice(0,e)+"..."}},"2fdb":function(t,e,n){"use strict";var o=n("5ca1"),a=n("d2c8"),r="includes";o(o.P+o.F*n("5147")(r),"String",{includes:function(t){return!!~a(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3c0c":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[n("adjustment-history",{attrs:{"employee-id":t.userId}})],1)},a=[],r=n("4f7d"),i=n("c38b"),c={name:"Adjustment",components:{AdjustmentHistory:r["a"]},data:function(){return{userId:Object(i["a"])()}}},u=c,s=n("2877"),l=Object(s["a"])(u,o,a,!1,null,"91cfdc1e",null);e["default"]=l.exports},"4f7d":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("adjustment-table",{attrs:{"load-data":t.loadData,"use-operations":t.isAdmin}},[t.isAdmin?n("Button",{attrs:{type:"primary",to:{name:"EmployeeAdjustment",query:{employeeId:t.employeeId}}}},[t._v("调整职务/薪级\n  ")]):t._e()],1)},a=[],r=(n("c5f6"),n("ef75")),i=n("fdf9"),c=n("ed08"),u={name:"AdjustmentHistory",components:{AdjustmentTable:i["a"]},props:{employeeId:{type:Number|String,default:null}},data:function(){return{isAdmin:Object(c["c"])(["ADMIN"])}},methods:{loadData:function(t,e,n){var o=this;Object(r["d"])(this.employeeId,t,e).then(function(t){var e=t.data,o=e.content,a=e.totalElements;n(o,a)}).catch(function(t){return o.$Notice.error({title:"获取调整历史失败",desc:t.data.message})})}}},s=u,l=n("2877"),f=Object(l["a"])(s,o,a,!1,null,"45fd0556",null);e["a"]=f.exports},5147:function(t,e,n){var o=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,!"/./"[t](e)}catch(a){}}return!0}},6762:function(t,e,n){"use strict";var o=n("5ca1"),a=n("c366")(!0);o(o.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"6b54":function(t,e,n){"use strict";n("3846");var o=n("cb7c"),a=n("0bfb"),r=n("9e1e"),i="toString",c=/./[i],u=function(t){n("2aba")(RegExp.prototype,i,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?u(function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?a.call(t):void 0)}):c.name!=i&&u(function(){return c.call(this)})},"96c9":function(t,e,n){},d2c8:function(t,e,n){var o=n("aae3"),a=n("be13");t.exports=function(t,e,n){if(o(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(t))}},dd99:function(t,e,n){"use strict";var o=n("2105"),a=n.n(o);a.a},ef75:function(t,e,n){"use strict";n.d(e,"i",function(){return a}),n.d(e,"g",function(){return r}),n.d(e,"h",function(){return i}),n.d(e,"j",function(){return c}),n.d(e,"k",function(){return u}),n.d(e,"m",function(){return s}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"l",function(){return h}),n.d(e,"b",function(){return y});var o=n("b775"),a=function(t,e,n,a){return o["a"].get("/api/employee/query",{params:{entityType:t,entityId:e,page:n,size:a}})},r=function(t){return o["a"].get("/api/employee/".concat(t))},i=function(t){return o["a"].post("/api/employee",t)},c=function(t){return o["a"].get("/api/employee/owner",{params:t})},u=function(t){return o["a"].post("/api/employee/restore","",{params:{employeeId:t}})},s=function(t,e){return o["a"].post("/api/employee/update",e,{params:{employeeId:t}})},l=function(t){return o["a"].get("/api/employee/".concat(t,"/attachments"))},f=function(t,e,n){return o["a"].get("/api/contract/",{params:{page:e,size:n,employeeId:t}})},d=function(t,e){return o["a"].post("/api/adjustment",e,{params:{employeeId:t}})},p=function(t,e,n){return o["a"].get("/api/adjustment",{params:{page:e,size:n,employeeId:t}})},m=function(t,e){return o["a"].post("/api/adjustment/discharge",e,{params:{employeeId:t}})},h=function(t,e){return o["a"].post("/api/adjustment/".concat(t),e)},y=function(t,e){return e.set("employeeId",t),o["a"].post("/api/employee/password",e)}},f867:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("Col",{attrs:{span:"12"}},[n("Row",{attrs:{type:"flex",gutter:5}},[n("Col",[t.useExport?n("Button",{attrs:{type:"success"},on:{click:t.onExport}},[t._v("导出CSV")]):t._e()],1),n("Col",[n("Select",{attrs:{multiple:"","max-tag-count":3,placeholder:"选择显示列"},on:{"on-change":t.showColumns},model:{value:t.keys,callback:function(e){t.keys=e},expression:"keys"}},t._l(t.columns,function(e){return n("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])}),1)],1)],1)],1),n("Col",[t._t("default")],2)],1),n("br"),n("Table",{ref:"table",staticClass:"query-list__table",attrs:{columns:t.displayed,data:t.content},on:{"on-row-dblclick":function(e){return t.$emit("on-db-click",e)}}}),n("br"),n("Row",{attrs:{type:"flex",justify:"end"}},[n("Col",[n("Page",{attrs:{current:t.page,total:t.totalElements,"page-size":t.size,"show-sizer":"","show-total":""},on:{"on-change":function(e){return t.onPage(e,t.size)},"on-page-size-change":function(e){return t.onPage(t.page,e)}}})],1)],1)],1)},a=[],r=(n("6762"),n("2fdb"),n("ac6a"),{name:"PageData",props:{columns:{type:Array,default:function(){return[]}},loadData:{type:Function,default:function(){return function(t,e,n){n([],0)}}},useExport:{type:Boolean,default:!0}},data:function(){return{keys:this.columns.map(function(t){return t.key}),displayed:this.columns.slice(),page:1,size:10,totalElements:1,content:[]}},mounted:function(){this.resetPage()},methods:{onExport:function(){var t=this;this.$refs.table.exportCsv({filename:"temp.csv",original:!1,columns:this.displayed,data:this.content.map(function(e){var n={};return t.displayed.forEach(function(t){t.noExport||(t.exportData?n[t.key]=t.exportData(e):n[t.key]=e[t.key])}),n})})},showColumns:function(){var t=this;this.displayed=this.columns.filter(function(e){return t.keys.includes(e.key)})},resetPage:function(){this.onPage(1,10)},onPage:function(t,e){this.page=t,this.size=e,this.fetchPage()},fetchPage:function(){var t=this,e=this.page,n=this.size;this.loadData(e-1,n,function(e,n){t.totalElements=n,t.content=e})},getData:function(){return this.content}}}),i=r,c=(n("dd99"),n("2877")),u=Object(c["a"])(i,o,a,!1,null,"8d711b90",null);e["a"]=u.exports},fa80:function(t,e,n){"use strict";var o=n("96c9"),a=n.n(o);a.a},fdf9:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-data",{attrs:{columns:t.columns,"load-data":t.loadData}})},a=[],r=n("f867"),i=n("2db4"),c=n("8454"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",gutter:5}},[n("Col",[n("Button",{attrs:{size:"small",shape:"circle",icon:"md-create"},on:{click:function(e){t.upModal=!0}}})],1),t.record.resource?n("Col",[n("Button",{attrs:{size:"small",shape:"circle",type:"success",icon:"md-download"},on:{click:t.onDownload}})],1):t._e()],1),n("Modal",{attrs:{title:"更新记录","footer-hide":!0},model:{value:t.upModal,callback:function(e){t.upModal=e},expression:"upModal"}},[n("simple-change-form",{attrs:{"use-button":!0,"effective-on":t.record.effectiveOn,description:t.record.description},on:{"on-form-ready":t.onOk}})],1)],1)},s=[],l=n("1a4e"),f=n("6c6e"),d={name:"SimpleChangeOps",components:{SimpleChangeForm:l["a"]},props:{record:{type:Object,default:function(){return{effectiveOn:new Date,description:""}}}},inject:["reload"],data:function(){return{upModal:!1}},methods:{onDownload:function(){Object(f["a"])(this.record.resource.id)},onOk:function(t){this.$emit("on-form-ready",t),this.upModal=!1}}},p=d,m=n("2877"),h=Object(m["a"])(p,u,s,!1,null,"dbda6c26",null),y=h.exports,b=n("ef75"),g={name:"AdjustmentTable",components:{PageData:r["a"]},inject:["reload"],props:{loadData:{type:Function,default:function(){return function(t,e,n){n([],0)}}},useOperations:{type:Boolean,default:!0}},data:function(){var t=this,e=[{title:"序号",key:"id"},{title:"员工",key:"employee",render:function(e,n){var o=n.row;return e("Button",{props:{size:"small"},on:{click:function(){return t.$router.push({name:"EmployeePanel",params:{id:o.employee.id},query:{tab:"adjustment"}})}}},Object(i["a"])(Object(c["e"])(o.employee),5))},exportData:function(t){return Object(c["e"])(t.employee)}},{title:"职务变动",key:"to",render:function(e,n){var o=n.row;return t.renderPosition(e,o.to)},exportData:function(t){return Object(c["e"])(t.to)}},{title:"调整后",key:"after",render:function(t,e){var n=e.row;return t("Tag",Object(c["h"])(n.after))},exportData:function(t){return Object(c["h"])(t.after)}},{title:"描述",key:"description",render:function(t,e){var n=e.row;return t("span",Object(i["a"])(n.description,25))},exportData:function(t){return'"'+t.description+'"'}},{title:"生效日期",key:"effectiveOn",render:function(t,e){var n=e.row;return t("span",Object(c["b"])(n.effectiveOn))},exportData:function(t){return Object(c["b"])(t.effectiveOn)}},{title:"查看",key:"check",render:function(t,e){var n=e.row;return t("Button",{props:{size:"small",icon:"md-download",disabled:!n.resource},on:{click:function(){return downloadResourceApi(n.resource.id)}}})},noExport:!0},{title:"操作",key:"operation",render:function(e,n){var o=n.row;return e(y,{props:{record:o},on:{"on-form-ready":function(e){return Object(b["l"])(o.id,e).then(function(e){t.$Notice.success({title:"更新调整历史成功"}),t.reload()}).catch(function(e){return t.$Notice.error({title:"更新调整历史失败",desc:e.data.message})})}}})},noExport:!0}];return{columns:t.useOperations?e:e.slice(0,-1)}},methods:{renderPosition:function(t,e){var n=this;return e?t("Button",{props:{size:"small",type:"primary"},on:{click:function(){return n.$router.push({name:"PositionDetails",params:{id:e.id}})}}},Object(i["a"])(Object(c["e"])(e),5)):t("span","/")}}},v=g,O=Object(m["a"])(v,o,a,!1,null,"bd25f9bc",null);e["a"]=O.exports}}]);
//# sourceMappingURL=chunk-3139749a.8235732a.js.map