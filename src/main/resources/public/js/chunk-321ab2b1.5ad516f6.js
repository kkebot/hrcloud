(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-321ab2b1"],{"0e8f":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"h",function(){return s}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return f}),n.d(e,"g",function(){return p});var a=n("b775"),r=function(t){return a["a"].get("/api/department/".concat(t))},o=function(t){return a["a"].get("/api/department/".concat(t,"/details"))},i=function(){return a["a"].get("/api/department")},l=function(t){return a["a"].get("/api/department/".concat(t,"/positions"))},u=function(t){return a["a"].get("/api/department/".concat(t,"/subordinates"))},c=function(t,e){return a["a"].get("/api/department/".concat(t,"/statistics"),{params:{period:e}})},s=function(t,e){return a["a"].post("/api/department",e,{params:{departmentId:t}})},d=function(t){return a["a"].post("/api/department/shutdown","",{params:{departmentId:t}})},f=function(t,e){return a["a"].post("/api/department/update",e,{params:{departmentId:t}})},p=function(t,e){return a["a"].get("/api/department/admin",{params:{entityType:t,entityId:e}})}},"19e3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:8}},[t.labelText?n("Col",{attrs:{span:t.labelSpan}},[n("div",{style:!t.labelSpan&&{width:t.labelWidth+"px"}},[n("span",[t._v(t._s(t.labelText))])])]):t._e(),n("Col",[n("Upload",{ref:"upload",attrs:{"show-upload-list":!1,action:"",accept:t.accept,"before-upload":t.handleUpload}},[n("Button",{attrs:{disabled:t.disabled,icon:"md-arrow-up",type:t.color}},[t._v(t._s(t.buttonHint))])],1)],1),t.file?n("Col",[n("Button",{attrs:{size:"small",icon:"md-close"},on:{click:function(e){t.file=null}}})],1):t._e()],1),t.file&&t.showSelected?n("div",[n("br"),n("Alert",[t._v("已选择文件:"+t._s(t.file.name))])],1):t._e()],1)},r=[],o=(n("c5f6"),{name:"UploadButton",props:{labelText:{type:String,default:"上传文件"},labelWidth:{type:Number,default:50},accept:{type:String,default:".txt"},buttonText:{type:String,default:"选择本地文件"},showSelected:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},labelSpan:{type:Number,default:null},color:{type:String,default:null}},computed:{buttonHint:function(){return this.file?"重新选择":this.buttonText}},data:function(){return{file:null,labelClazz:{width:this.labelWidth}}},methods:{handleUpload:function(t){return this.file=t,this.$emit("on-file-ready",t),!1},reset:function(){this.file=null}}}),i=o,l=n("2877"),u=Object(l["a"])(i,a,r,!1,null,"7487a8df",null);e["a"]=u.exports},"1a4e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Form",{ref:"form",attrs:{"label-width":100,"label-position":"left",model:t.formData}},[n("FormItem",{staticClass:"form-label-font",attrs:{label:"生效时间",prop:"effectiveOn"}},[n("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:t.formData.effectiveOn,callback:function(e){t.$set(t.formData,"effectiveOn",e)},expression:"formData.effectiveOn"}})],1),n("FormItem",{staticClass:"form-label-font",attrs:{label:"描述文字",prop:"description"}},[n("Input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),n("upload-button",{ref:"upload",attrs:{accept:".doc,.docx","label-width":100},on:{"on-file-ready":function(e){t.formData.file=e}}}),t.useButton?n("div",[n("br"),n("Button",{attrs:{type:"success"},on:{click:t.onOk}},[t._v("确定")])],1):t._e()],1)},r=[],o=(n("6b54"),n("19e3")),i=n("2934"),l={name:"SimpleChangeForm",components:{UploadButton:o["a"]},props:{useButton:{type:Boolean,default:!1},effectiveOn:{type:String,default:function(){return(new Date).toString()}},description:{type:String,default:""}},data:function(){return{formData:this.defaultForm()}},methods:{defaultForm:function(){return{effectiveOn:new Date(this.effectiveOn),description:this.description,file:null}},reset:function(){this.formData=this.defaultForm(),this.$refs.upload.reset()},getFormData:function(){var t=this.formData;return Object(i["b"])(t)},onOk:function(){this.$emit("on-form-ready",this.getFormData()),this.reset()},debugPrint:function(){var t=this.effectiveOn,e=this.formData;console.log({effectiveOn:t,formData:e})}}},u=l,c=(n("fa80"),n("2877")),s=Object(c["a"])(u,a,r,!1,null,"952f6d5e",null);e["a"]=s.exports},"1e1a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.employee?n("Card",[n("Divider",{attrs:{orientation:"left"}},[t._v("员工调整")]),t.department?n("Row",{attrs:{type:"flex",align:"middle"}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("当前部门")])]),n("Col",[t._v("\n      "+t._s(t.department.name)+"("+t._s(t.department.id)+")\n    ")])],1):t._e(),n("br"),n("Row",{attrs:{type:"flex",align:"middle"}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("当前职务")])]),n("Col",[n("Tag",{attrs:{color:"success"}},[t._v("\n        "+t._s(t.employee.mainPosition.name)+"\n      ")]),t._v("\n      ("+t._s(t.employee.mainPosition.id)+")\n    ")],1)],1),n("br"),n("Row",{attrs:{type:"flex",align:"middle"}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("当前薪级")])]),n("Col",[n("Tag",{attrs:{color:"success"}},[t._v("\n        "+t._s(t.employee.scale.id)+"(￥"+t._s(t.employee.scale.salary)+")\n      ")])],1)],1),n("Divider"),n("adjustment-form",{attrs:{employee:t.employee,"use-button":!0},on:{"on-form-ready":t.onAdjustment}})],1):t._e()},r=[],o=n("ef75"),i=n("0e8f"),l=n("6b8c"),u={components:{AdjustmentForm:l["a"]},data:function(){return{employeeId:this.$route.query.employeeId,employee:null,department:null}},mounted:function(){var t=this;Object(o["g"])(this.employeeId).then(function(e){return t.employee=e.data}),Object(i["g"])("employee",this.employeeId).then(function(e){return t.department=e.data})},methods:{onAdjustment:function(t){var e=this,n=this.employeeId;Object(o["a"])(n,t).then(function(t){e.$Notice.success({title:"调整成功"}),e.$router.push({name:"EmployeePanel",params:{id:n},query:{tab:"employee"}})}).catch(function(t){return e.$Notice.error({title:"调整失败",desc:t.data.message})})}}},c=u,s=(n("8719"),n("2877")),d=Object(s["a"])(c,a,r,!1,null,"763b51d5",null);e["default"]=d.exports},"2fdb":function(t,e,n){"use strict";var a=n("5ca1"),r=n("d2c8"),o="includes";a(a.P+a.F*n("5147")(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"44b0":function(t,e,n){},5147:function(t,e,n){var a=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,!"/./"[t](e)}catch(r){}}return!0}},6762:function(t,e,n){"use strict";var a=n("5ca1"),r=n("c366")(!0);a(a.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),r=n("0bfb"),o=n("9e1e"),i="toString",l=/./[i],u=function(t){n("2aba")(RegExp.prototype,i,t,!0)};n("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?u(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):l.name!=i&&u(function(){return l.call(this)})},"6b8c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("新的部门")])]),t.department?n("Col",[t._v("\n      "+t._s(t.department.name)+"("+t._s(t.department.id)+")\n    ")]):t._e(),n("Col",[n("Button",{on:{click:function(e){t.upModal=!0}}},[t._v(t._s(t.department?"重新选择":"选择部门"))])],1)],1),n("br"),n("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("新的职务")])]),t.department?n("Col",[n("Select",{attrs:{placeholder:"选择职务"},model:{value:t.toId,callback:function(e){t.toId=e},expression:"toId"}},[t._l(t.department.positions,function(e){return[e.status?n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+" ("+t._s(e.id)+")")]):t._e()]})],2)],1):n("Col",[n("Alert",{staticStyle:{"margin-bottom":"0"},attrs:{"show-icon":""}},[t._v("请先选择部门")])],1)],1),n("br"),n("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[t._v("新的薪级")])]),n("Col",[n("Select",{attrs:{placeholder:"选择薪资级别"},model:{value:t.afterId,callback:function(e){t.afterId=e},expression:"afterId"}},t._l(t.payScales,function(e){return n("Option",{attrs:{value:e.id}},[t._v("级别"+t._s(e.id)+"(￥"+t._s(e.salary)+")")])}),1)],1)],1),n("br"),n("simple-change-form",{ref:"subForm"}),t.useButton?n("div",[n("br"),n("Button",{attrs:{type:"success",disabled:t.afterId===t.beforeId&&t.toId===t.fromId||!t.afterId&&!t.toId},on:{click:t.onOk}},[t._v("确定")])],1):t._e(),n("Modal",{attrs:{title:"选择部门"},model:{value:t.upModal,callback:function(e){t.upModal=e},expression:"upModal"}},[n("department-tree",{on:{"node-select-change":t.onSelectChange}})],1)],1)},r=[],o=(n("6b54"),n("1a4e")),i=n("9f8d"),l=n("0e8f"),u=n("b775"),c=function(){return u["a"].get("/api/scale")},s={name:"AdjustmentForm",components:{DepartmentTree:i["a"],SimpleChangeForm:o["a"]},props:{useButton:{type:Boolean,default:!1},employee:{type:Object,default:function(){return{scale:{id:null},mainPosition:{id:null}}}}},data:function(){return{payScales:[],afterId:null,department:null,upModal:!1,toId:null}},computed:{beforeId:function(){return this.employee.scale.id},fromId:function(){return this.employee.mainPosition.id}},mounted:function(){var t=this;c().then(function(e){return t.payScales=e.data})},methods:{reset:function(){this.$refs.subForm.reset(),this.afterId=null,this.toId=null},onSelectChange:function(t){var e=this;this.reset();var n=t&&t.entity;t.selected&&Object(l["b"])(n.id).then(function(t){e.department=t.data})},onOk:function(){var t=this.$refs.subForm.getFormData();t.append("toId",this.toId||""),t.append("afterId",this.afterId||""),console.log(t.toString()),this.$emit("on-form-ready",t),this.reset()}}},d=s,f=(n("7c05"),n("2877")),p=Object(f["a"])(d,a,r,!1,null,"684bd20a",null);e["a"]=p.exports},"7c05":function(t,e,n){"use strict";var a=n("936f"),r=n.n(a);r.a},8719:function(t,e,n){"use strict";var a=n("44b0"),r=n.n(a);r.a},"936f":function(t,e,n){},"96c9":function(t,e,n){},"9f8d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Tree",{ref:"treeComp",attrs:{data:t.data,"load-data":t.loadData},on:{"on-select-change":t.onSelectedChange}})],1)},r=[],o=(n("ac6a"),n("6762"),n("2fdb"),n("5d73")),i=n.n(o),l=n("75fc"),u=(n("7f7f"),n("0e8f")),c={name:"DepartmentTree",props:["initId"],data:function(){return{data:[{title:"parent",loading:!1,children:[],entity:null,expand:!1}]}},computed:{root:function(){return this.data[0]}},mounted:function(){var t=this;Object(u["c"])().then(function(e){var n=e.data;t.root.title=n.name,t.root.entity=n,t.initId?Object(u["a"])(t.initId).then(function(e){var n=e.data;t.expandMounted(t.root,n.hierarchy)}):t.expandMounted(t.root,n.hierarchy)})},methods:{debug:function(){console.log(this.root),console.log(this.$refs.treeComp)},expandMounted:function(t,e){var n=this,a=t.entity,r=a.hierarchy||"/";if(r===e)return this.$set(t,"selected",!0),void this.onSelectedChange([t]);this._loadData(t,function(a){var o;(o=t.children).push.apply(o,Object(l["a"])(a)),t.expand=!0;var u=!0,c=!1,s=void 0;try{for(var d,f=i()(t.children);!(u=(d=f.next()).done);u=!0){var p=d.value,m=r+""+p.entity.id+"/";if(e.includes(m)){n.expandMounted(p,e);break}}}catch(h){c=!0,s=h}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}})},loadData:function(t,e){this._loadData(t,e)},_loadData:function(t,e){Object(u["e"])(t.entity.id).then(function(t){if(t.data){var n=[],a=t.data||[];a.forEach(function(t){return n.push({title:t.name,loading:!1,children:[],entity:t})}),e(n)}})},onSelectedChange:function(t){var e=t[t.length-1];e&&this._loadData(e,function(){}),this.$emit("node-select-change",e)}}},s=c,d=n("2877"),f=Object(d["a"])(s,a,r,!1,null,"b494006c",null);e["a"]=f.exports},d2c8:function(t,e,n){var a=n("aae3"),r=n("be13");t.exports=function(t,e,n){if(a(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},ef75:function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return i}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return d}),n.d(e,"a",function(){return f}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"l",function(){return h}),n.d(e,"b",function(){return b});var a=n("b775"),r=function(t,e,n,r){return a["a"].get("/api/employee/query",{params:{entityType:t,entityId:e,page:n,size:r}})},o=function(t){return a["a"].get("/api/employee/".concat(t))},i=function(t){return a["a"].post("/api/employee",t)},l=function(t){return a["a"].get("/api/employee/owner",{params:t})},u=function(t){return a["a"].post("/api/employee/restore","",{params:{employeeId:t}})},c=function(t,e){return a["a"].post("/api/employee/update",e,{params:{employeeId:t}})},s=function(t){return a["a"].get("/api/employee/".concat(t,"/attachments"))},d=function(t,e,n){return a["a"].get("/api/contract/",{params:{page:e,size:n,employeeId:t}})},f=function(t,e){return a["a"].post("/api/adjustment",e,{params:{employeeId:t}})},p=function(t,e,n){return a["a"].get("/api/adjustment",{params:{page:e,size:n,employeeId:t}})},m=function(t,e){return a["a"].post("/api/adjustment/discharge",e,{params:{employeeId:t}})},h=function(t,e){return a["a"].post("/api/adjustment/".concat(t),e)},b=function(t,e){return e.set("employeeId",t),a["a"].post("/api/employee/password",e)}},fa80:function(t,e,n){"use strict";var a=n("96c9"),r=n.n(a);r.a}}]);
//# sourceMappingURL=chunk-321ab2b1.5ad516f6.js.map