(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ea1763c"],{"0d12":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"form",attrs:{"label-width":80,"label-position":"left",model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"部门名称",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"创建日期",prop:"createdAt"}},[a("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:t.formData.createdAt,callback:function(e){t.$set(t.formData,"createdAt",e)},expression:"formData.createdAt"}})],1),a("FormItem",{attrs:{label:"描述",prop:"description"}},[a("Input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("upload-button",{ref:"upload",attrs:{accept:".doc,.docx","label-width":80},on:{"on-file-ready":function(e){t.formData.file=e}}}),t.useButton?a("div",[a("br"),a("Button",{attrs:{type:"success",disabled:!t.formData.name||!t.formData.createdAt},on:{click:t.onOk}},[t._v("确定")])],1):t._e()],1)},r=[],o=a("cebc"),i=a("2934"),u=a("19e3"),l={name:"DepartmentForm",components:{UploadButton:u["a"]},props:{useButton:{type:Boolean,default:!1},department:{type:Object,default:function(){return{}}}},data:function(){return{ruleValidate:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},formData:Object(o["a"])({},this.defaultForm(),this.department)}},methods:{handleUpload:function(t){return this.formData.file=t,!1},reset:function(){this.formData=this.defaultForm(),this.$refs.upload.reset()},defaultForm:function(){return{name:null,createdAt:new Date,file:null,description:null}},onOk:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.$emit("on-form-ready",Object(i["b"])(t.formData)),t.reset())})}}},d=l,c=a("2877"),s=Object(c["a"])(d,n,r,!1,null,"9fdf833c",null);e["a"]=s.exports},"0e8f":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return u}),a.d(e,"e",function(){return l}),a.d(e,"f",function(){return d}),a.d(e,"h",function(){return c}),a.d(e,"i",function(){return s}),a.d(e,"j",function(){return f}),a.d(e,"g",function(){return p});var n=a("b775"),r=function(t){return n["a"].get("/api/department/".concat(t))},o=function(t){return n["a"].get("/api/department/".concat(t,"/details"))},i=function(){return n["a"].get("/api/department")},u=function(t){return n["a"].get("/api/department/".concat(t,"/positions"))},l=function(t){return n["a"].get("/api/department/".concat(t,"/subordinates"))},d=function(t,e){return n["a"].get("/api/department/".concat(t,"/statistics"),{params:{period:e}})},c=function(t,e){return n["a"].post("/api/department",e,{params:{departmentId:t}})},s=function(t){return n["a"].post("/api/department/shutdown","",{params:{departmentId:t}})},f=function(t,e){return n["a"].post("/api/department/update",e,{params:{departmentId:t}})},p=function(t,e){return n["a"].get("/api/department/admin",{params:{entityType:t,entityId:e}})}},"19e3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{type:"flex",align:"middle",gutter:8}},[t.labelText?a("Col",{attrs:{span:t.labelSpan}},[a("div",{style:!t.labelSpan&&{width:t.labelWidth+"px"}},[a("span",[t._v(t._s(t.labelText))])])]):t._e(),a("Col",[a("Upload",{ref:"upload",attrs:{"show-upload-list":!1,action:"",accept:t.accept,"before-upload":t.handleUpload}},[a("Button",{attrs:{disabled:t.disabled,icon:"md-arrow-up",type:t.color}},[t._v(t._s(t.buttonHint))])],1)],1),t.file?a("Col",[a("Button",{attrs:{size:"small",icon:"md-close"},on:{click:function(e){t.file=null}}})],1):t._e()],1),t.file&&t.showSelected?a("div",[a("br"),a("Alert",[t._v("已选择文件:"+t._s(t.file.name))])],1):t._e()],1)},r=[],o=(a("c5f6"),{name:"UploadButton",props:{labelText:{type:String,default:"上传文件"},labelWidth:{type:Number,default:50},accept:{type:String,default:".txt"},buttonText:{type:String,default:"选择本地文件"},showSelected:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},labelSpan:{type:Number,default:null},color:{type:String,default:null}},computed:{buttonHint:function(){return this.file?"重新选择":this.buttonText}},data:function(){return{file:null,labelClazz:{width:this.labelWidth}}},methods:{handleUpload:function(t){return this.file=t,this.$emit("on-file-ready",t),!1},reset:function(){this.file=null}}}),i=o,u=a("2877"),l=Object(u["a"])(i,n,r,!1,null,"7487a8df",null);e["a"]=l.exports},"709e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Divider",{attrs:{orientation:"left"}},[t._v("添加下级部门")]),a("department-form",{attrs:{"use-button":!0},on:{"on-form-ready":t.onSetup}})],1)},r=[],o=a("0d12"),i=a("0e8f"),u={components:{DepartmentForm:o["a"]},data:function(){return{administrationId:this.$route.query.departmentId,administration:null}},methods:{onSetup:function(t){var e=this,a=this.administrationId;Object(i["h"])(a,t).then(function(t){var a=t.data.id;e.$Notice.success({title:"设置部门成功"}),e.$router.push({name:"DepartmentDetails",params:{id:a}})}).catch(function(t){return e.$Notice.error({title:"设置部门失败(".concat(t.status,")"),desc:t.data.message})})}}},l=u,d=(a("ffc6"),a("2877")),c=Object(d["a"])(l,n,r,!1,null,"beb7aff4",null);e["default"]=c.exports},"8f9a":function(t,e,a){},ffc6:function(t,e,a){"use strict";var n=a("8f9a"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-0ea1763c.cae50b15.js.map