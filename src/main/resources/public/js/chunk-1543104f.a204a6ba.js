(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1543104f"],{"11ac":function(e,t,n){},"19e3":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:8}},[e.labelText?n("Col",{attrs:{span:e.labelSpan}},[n("div",{style:!e.labelSpan&&{width:e.labelWidth+"px"}},[n("span",[e._v(e._s(e.labelText))])])]):e._e(),n("Col",[n("Upload",{ref:"upload",attrs:{"show-upload-list":!1,action:"",accept:e.accept,"before-upload":e.handleUpload}},[n("Button",{attrs:{disabled:e.disabled,icon:"md-arrow-up",type:e.color}},[e._v(e._s(e.buttonHint))])],1)],1),e.file?n("Col",[n("Button",{attrs:{size:"small",icon:"md-close"},on:{click:function(t){e.file=null}}})],1):e._e()],1),e.file&&e.showSelected?n("div",[n("br"),n("Alert",[e._v("已选择文件:"+e._s(e.file.name))])],1):e._e()],1)},o=[],a=(n("c5f6"),{name:"UploadButton",props:{labelText:{type:String,default:"上传文件"},labelWidth:{type:Number,default:50},accept:{type:String,default:".txt"},buttonText:{type:String,default:"选择本地文件"},showSelected:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},labelSpan:{type:Number,default:null},color:{type:String,default:null}},computed:{buttonHint:function(){return this.file?"重新选择":this.buttonText}},data:function(){return{file:null,labelClazz:{width:this.labelWidth}}},methods:{handleUpload:function(e){return this.file=e,this.$emit("on-file-ready",e),!1},reset:function(){this.file=null}}}),c=a,i=n("2877"),l=Object(i["a"])(c,r,o,!1,null,"7487a8df",null);t["a"]=l.exports},"1a4e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"form",attrs:{"label-width":100,"label-position":"left",model:e.formData}},[n("FormItem",{staticClass:"form-label-font",attrs:{label:"生效时间",prop:"effectiveOn"}},[n("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:e.formData.effectiveOn,callback:function(t){e.$set(e.formData,"effectiveOn",t)},expression:"formData.effectiveOn"}})],1),n("FormItem",{staticClass:"form-label-font",attrs:{label:"描述文字",prop:"description"}},[n("Input",{model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1),n("upload-button",{ref:"upload",attrs:{accept:".doc,.docx","label-width":100},on:{"on-file-ready":function(t){e.formData.file=t}}}),e.useButton?n("div",[n("br"),n("Button",{attrs:{type:"success"},on:{click:e.onOk}},[e._v("确定")])],1):e._e()],1)},o=[],a=(n("6b54"),n("19e3")),c=n("2934"),i={name:"SimpleChangeForm",components:{UploadButton:a["a"]},props:{useButton:{type:Boolean,default:!1},effectiveOn:{type:String,default:function(){return(new Date).toString()}},description:{type:String,default:""}},data:function(){return{formData:this.defaultForm()}},methods:{defaultForm:function(){return{effectiveOn:new Date(this.effectiveOn),description:this.description,file:null}},reset:function(){this.formData=this.defaultForm(),this.$refs.upload.reset()},getFormData:function(){var e=this.formData;return Object(c["b"])(e)},onOk:function(){this.$emit("on-form-ready",this.getFormData()),this.reset()},debugPrint:function(){var e=this.effectiveOn,t=this.formData;console.log({effectiveOn:e,formData:t})}}},l=i,s=(n("fa80"),n("2877")),u=Object(s["a"])(l,r,o,!1,null,"952f6d5e",null);t["a"]=u.exports},"35ad":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return i});var r=n("b775"),o=function(e,t){return r["a"].post("/api/contract/renew",t,{params:{contractId:e}})},a=function(e,t,n){return r["a"].get("/api/contract/renew",{params:{contractId:e,page:t,size:n}})},c=function(e,t){return r["a"].post("/api/contract/sign",t,{params:{employeeId:e}})},i=function(e,t){return r["a"].post("/api/contract/renew/update",t,{params:{contractRenewId:e}})}},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"404a":function(e,t,n){"use strict";var r=n("11ac"),o=n.n(r);o.a},"6b54":function(e,t,n){"use strict";n("3846");var r=n("cb7c"),o=n("0bfb"),a=n("9e1e"),c="toString",i=/./[c],l=function(e){n("2aba")(RegExp.prototype,c,e,!0)};n("79e5")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?l(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):void 0)}):i.name!=c&&l(function(){return i.call(this)})},7842:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("page-data",{attrs:{columns:e.columns.contract,"load-data":e.loadContract}},[e.useOperations?n("Button",{attrs:{type:"primary",to:{name:"SignContract",query:{employeeId:e.employeeId}}}},[e._v("签约新合同")]):e._e()],1)],1),e.selected?n("div",[n("Divider",{attrs:{orientation:"left"}},[e._v("合同(编号"+e._s(e.selected.id)+")续签历史")]),n("page-data",{key:e.selected.id,attrs:{"load-data":e.loadRenew,columns:e.columns.renew}})],1):e._e()])},o=[],a=(n("cadf"),n("551c"),n("f751"),n("097d"),n("ef75")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:10}},[n("Col",{staticStyle:{width:"100px"}},[n("label",[e._v("合约到期时间")])]),n("Col",[n("DatePicker",{attrs:{type:"datetime",editable:!1},model:{value:e.renewTerm,callback:function(t){e.renewTerm=t},expression:"renewTerm"}})],1)],1),n("Divider"),n("simple-change-form",{ref:"subForm"}),e.useButton?n("div",[n("br"),n("Button",{attrs:{type:"success",disabled:!e.renewTerm||e.renewTerm===e.originalTerm},on:{click:e.onOk}},[e._v("确定")])],1):e._e()],1)},i=[],l=n("1a4e"),s={name:"ContractRenewForm",components:{SimpleChangeForm:l["a"]},props:["originalTerm","useButton"],data:function(){return{renewTerm:this.originalTerm}},methods:{reset:function(){this.$refs.subForm.reset(),this.renewTerm=null},onOk:function(){var e=this.$refs.subForm.getFormData();new Date(this.renewTerm)>=new Date(e.get("effectiveOn"))?(e.append("renewTerm",this.renewTerm),this.$emit("on-form-ready",e),this.reset()):this.$Notice.error({title:"结束时间不可小于生效日期"})}}},u=s,d=n("2877"),f=Object(d["a"])(u,c,i,!1,null,"64ec9b34",null),p=f.exports,m=n("f867"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.contract.status?n("div",[n("ButtonGroup",{attrs:{size:"small"}},[n("Button",{attrs:{type:"info",icon:"md-refresh"},on:{click:function(t){e.modal.renew=!0}}}),n("Button",{attrs:{disabled:!e.contract.status,type:"error",icon:"md-close"},on:{click:function(t){e.modal.cancel=!0}}})],1),n("Modal",{attrs:{title:"续签合同(编号"+e.contract.id+")","footer-hide":!0},model:{value:e.modal.renew,callback:function(t){e.$set(e.modal,"renew",t)},expression:"modal.renew"}},[n("contract-renew-form",{key:e.contract.id,attrs:{"original-term":e.contract.effectiveUntil,"use-button":!0},on:{"on-form-ready":function(t){(e.modal.renew=!1)||e.$emit("on-renew",t)}}})],1),n("Modal",{attrs:{title:"终止合同(编号"+e.contract.id+")","footer-hide":!0},model:{value:e.modal.cancel,callback:function(t){e.$set(e.modal,"cancel",t)},expression:"modal.cancel"}},[n("simple-change-form",{key:e.contract.id,ref:"cancelForm"}),n("Divider"),n("Button",{attrs:{long:"",type:"error"},on:{click:function(t){(e.modal.cancel=!1)||e.$emit("on-cancel",e.$refs.cancelForm.getFormData())}}},[e._v("\n      终止合同\n    ")])],1)],1):e._e()},h=[],v={name:"ContractOps",components:{PageData:m["a"],SimpleChangeForm:l["a"],ContractRenewForm:p},props:["contract"],inject:["reload"],data:function(){return{modal:{cancel:!1,renew:!1}}}},g=v,w=Object(d["a"])(g,b,h,!1,null,"526cd340",null),y=w.exports,O=n("35ad"),k=n("6c6e"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",gutter:5}},[n("Col",[n("Button",{attrs:{shape:"circle",size:"small",icon:"md-create"},on:{click:function(t){e.modal=!0}}})],1)],1),n("Modal",{attrs:{title:"修改续签记录(编号"+e.renew.id+")","footer-hide":!0},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("simple-change-form",{attrs:{"use-button":!0},on:{"on-form-ready":function(t){(e.modal=!1)||e.$emit("on-update",t)}}})],1)],1)},D=[],j={name:"ContractRenewOps",components:{SimpleChangeForm:l["a"]},props:{renew:{type:Object,default:function(){return{}}}},data:function(){return{modal:!1}}},_=j,$=Object(d["a"])(_,x,D,!1,null,"119ca2d8",null),C=$.exports,B=n("ed08"),T=n("8454"),F=n("2db4"),I={name:"ContractManage",components:{ContractOps:y,PageData:m["a"],ContractRenewForm:p,ContractRenewOps:C},props:{employeeId:null},inject:["reload"],data:function(){var e=this,t=this,n={contract:[{title:"编号",key:"id"},{title:"状态",key:"status",render:function(e,t){var n=t.row;return e("Tag",{props:{color:n.status?"success":"error"}},Object(T["a"])(n.status))}},{title:"起始日期",key:"effectiveOn",render:function(e,t){var n=t.row;return e("span",Object(T["b"])(n.effectiveOn))},exportData:function(e){return Object(T["b"])(e.effectiveOn)}},{title:"终止日期",key:"effectiveUntil",render:function(e,t){var n=t.row;return e("span",Object(T["b"])(n.effectiveUntil))},exportData:function(e){return Object(T["b"])(e.effectiveUntil)}},{title:"描述",key:"description",render:function(e,t){var n=t.row;return e("span",n.description||"/")}},{title:"查看",key:"check",render:function(e,n){var r=n.row;return e("ButtonGroup",{props:{size:"small"}},[e("Button",{props:{icon:"md-search"},on:{click:function(){return t.selected=r}}}),e("Button",{props:{icon:"md-download"},on:{click:function(){return Object(k["a"])(r.resource.id)}}})])},noExport:!0},{title:"操作",key:"operation",render:function(n,r){var o=r.row;return n(y,{props:{contract:o},on:{"on-renew":function(n){Object(O["b"])(o.id,n).then(function(e){t.$Notice.success({title:"续签合同成功"}),t.reload()}).catch(function(t){return e.$Notice.error({title:"续签合同失败(".concat(t.status,")"),desc:t.data.message})})},"on-cancel":function(n){Object(O["b"])(o.id,n).then(function(e){t.$Notice.success({title:"终止合同成功"}),t.reload()}).catch(function(t){return e.$Notice.error({title:"终止合同失败(".concat(t.status,")"),desc:t.data.message})})}}})},noExport:!0}],renew:[{title:"序号",key:"id"},{title:"上次到期时间",key:"originalTerm",render:function(e,t){var n=t.row;return e("span",Object(T["b"])(n.originalTerm))},exportData:function(e){return Object(T["b"])(e.originalTerm)}},{title:"描述",key:"description",render:function(e,t){var n=t.row;return e("span",Object(F["a"])(n.description,8))},exportData:function(e){return'"'+e.description+'"'}},{title:"生效时间",key:"effectiveOn",render:function(e,t){var n=t.row;return e("span",Object(T["b"])(n.effectiveOn))},exportData:function(e){return Object(T["b"])(e.effectiveOn)}},{title:"查看",key:"check",render:function(e,t){var n=t.row;return e("Button",{props:{size:"small",icon:"md-download",disabled:!n.resource},on:{click:function(){return Object(k["a"])(n.resource.id)}}})},noExport:!0},{title:"操作",key:"operations",render:function(n,r){var o=r.row;return n(C,{props:{renew:o},on:{"on-update":function(n){Object(O["d"])(o.id,n).then(function(e){t.$Notice.success({title:"修改续签记录成功"}),t.reload()}).catch(function(t){return e.$Notice.error({title:"修改续签记录失败(".concat(t.status,")"),desc:t.data.message})})}}})},noExport:!0}]},r=Object(B["c"])(["ADMIN"]);return{selected:null,useOperations:r,columns:{contract:r?n.contract:n.contract.slice(0,-1),renew:r?n.renew:n.renew.slice(0,-1)}}},methods:{loadContract:function(e,t,n){var r=this;Object(a["f"])(this.employeeId,e,t).then(function(e){var t=e.data,r=t.content,o=t.totalElements;n(r,o)}).catch(function(e){return r.$Notice.error({title:"获取合同失败(".concat(e.status,")"),desc:e.data.message})})},loadRenew:function(e,t,n){var r=this;Object(O["a"])(this.selected.id,e,t).then(function(e){var t=e.data,r=t.content,o=t.totalElements;n(r,o)}).catch(function(e){return r.$Notice.error({title:"获取续签历史失败".concat(e.status),desc:e.data.message})})},debugPrint:function(e){console.log({row:e})}}},S=I,E=(n("404a"),Object(d["a"])(S,r,o,!1,null,"160ddb7c",null));t["a"]=E.exports},"96c9":function(e,t,n){},ef75:function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"g",function(){return a}),n.d(t,"h",function(){return c}),n.d(t,"j",function(){return i}),n.d(t,"k",function(){return l}),n.d(t,"m",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"l",function(){return b}),n.d(t,"b",function(){return h});var r=n("b775"),o=function(e,t,n,o){return r["a"].get("/api/employee/query",{params:{entityType:e,entityId:t,page:n,size:o}})},a=function(e){return r["a"].get("/api/employee/".concat(e))},c=function(e){return r["a"].post("/api/employee",e)},i=function(e){return r["a"].get("/api/employee/owner",{params:e})},l=function(e){return r["a"].post("/api/employee/restore","",{params:{employeeId:e}})},s=function(e,t){return r["a"].post("/api/employee/update",t,{params:{employeeId:e}})},u=function(e){return r["a"].get("/api/employee/".concat(e,"/attachments"))},d=function(e,t,n){return r["a"].get("/api/contract/",{params:{page:t,size:n,employeeId:e}})},f=function(e,t){return r["a"].post("/api/adjustment",t,{params:{employeeId:e}})},p=function(e,t,n){return r["a"].get("/api/adjustment",{params:{page:t,size:n,employeeId:e}})},m=function(e,t){return r["a"].post("/api/adjustment/discharge",t,{params:{employeeId:e}})},b=function(e,t){return r["a"].post("/api/adjustment/".concat(e),t)},h=function(e,t){return t.set("employeeId",e),r["a"].post("/api/employee/password",t)}},fa80:function(e,t,n){"use strict";var r=n("96c9"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-1543104f.a204a6ba.js.map