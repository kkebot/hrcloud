{"version":3,"sources":["webpack:///./src/pages/organization/department/DepartmentForm.vue?2a12","webpack:///src/pages/organization/department/DepartmentForm.vue","webpack:///./src/pages/organization/department/DepartmentForm.vue?8ea0","webpack:///./src/pages/organization/department/DepartmentForm.vue","webpack:///./src/api/department.js","webpack:///./src/components/UploadButton/UploadButton.vue?d4a5","webpack:///src/components/UploadButton/UploadButton.vue","webpack:///./src/components/UploadButton/UploadButton.vue?cfa9","webpack:///./src/components/UploadButton/UploadButton.vue","webpack:///./src/pages/organization/department/update/index.vue?04c3","webpack:///src/pages/organization/department/update/index.vue","webpack:///./src/pages/organization/department/update/index.vue?f3ab","webpack:///./src/pages/organization/department/update/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","label-width","label-position","model","formData","rules","ruleValidate","label","prop","value","callback","$$v","$set","expression","type","editable","accept","on","on-file-ready","$event","file","disabled","name","createdAt","click","onOk","_v","_e","staticRenderFns","DepartmentFormvue_type_script_lang_js_","components","UploadButton","props","useButton","Boolean","default","department","Object","data","required","message","trigger","objectSpread","defaultForm","methods","handleUpload","reset","$refs","upload","Date","description","_this","form","validate","valid","$emit","common","department_DepartmentFormvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","__webpack_require__","d","getDepartmentApi","getDepartmentDetailsApi","getHeadOfficeApi","getPositionsOfApi","getSubordinatesApi","getWageStatisticsApi","setupDepartmentApi","shutdownDepartmentApi","updateDepartmentApi","queryAdminApi","_utils_request__WEBPACK_IMPORTED_MODULE_0__","id","request","get","concat","departmentId","period","params","post","entityType","entityId","align","gutter","labelText","span","labelSpan","style","width","labelWidth","_s","show-upload-list","action","before-upload","icon","color","buttonHint","size","showSelected","UploadButtonvue_type_script_lang_js_","String","Number","buttonText","computed","labelClazz","UploadButton_UploadButtonvue_type_script_lang_js_","slot","use-button","on-form-ready","updateDepartment","updatevue_type_script_lang_js_","DepartmentForm","$route","query","mounted","then","res","catch","e","$Notice","error","title","status","desc","_this2","_","success","$router","push","department_updatevue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-345bb9e8.7688be41.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"form\",attrs:{\"label-width\":80,\"label-position\":\"left\",\"model\":_vm.formData,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"label\":\"部门名称\",\"prop\":\"name\"}},[_c('Input',{model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"创建日期\",\"prop\":\"createdAt\"}},[_c('DatePicker',{attrs:{\"type\":\"datetime\",\"editable\":false},model:{value:(_vm.formData.createdAt),callback:function ($$v) {_vm.$set(_vm.formData, \"createdAt\", $$v)},expression:\"formData.createdAt\"}})],1),_c('FormItem',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('Input',{model:{value:(_vm.formData.description),callback:function ($$v) {_vm.$set(_vm.formData, \"description\", $$v)},expression:\"formData.description\"}})],1)],1),_c('upload-button',{ref:\"upload\",attrs:{\"accept\":\".doc,.docx\",\"label-width\":80},on:{\"on-file-ready\":function($event){_vm.formData.file=$event}}}),(_vm.useButton)?_c('div',[_c('br'),_c('Button',{attrs:{\"type\":\"success\",\"disabled\":!_vm.formData.name || !_vm.formData.createdAt},on:{\"click\":_vm.onOk}},[_vm._v(\"确定\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Form :label-width=\"80\" label-position=\"left\" ref=\"form\" :model=\"formData\" :rules=\"ruleValidate\">\r\n      <FormItem label=\"部门名称\" prop=\"name\">\r\n        <Input v-model=\"formData.name\"/>\r\n      </FormItem>\r\n      <FormItem label=\"创建日期\" prop=\"createdAt\">\r\n        <DatePicker type=\"datetime\" :editable=\"false\" v-model=\"formData.createdAt\"></DatePicker>\r\n      </FormItem>\r\n      <FormItem label=\"描述\" prop=\"description\">\r\n        <Input v-model=\"formData.description\"/>\r\n      </FormItem>\r\n    </Form>\r\n    <upload-button\r\n        accept=\".doc,.docx\"\r\n        ref=\"upload\"\r\n        :label-width=\"80\"\r\n        @on-file-ready=\"formData.file=$event\"/>\r\n    <div v-if=\"useButton\">\r\n      <br/>\r\n      <Button type=\"success\" :disabled=\"!formData.name || !formData.createdAt\" @click=\"onOk\">确定</Button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import {obj2form} from \"../../../api/common\";\r\n  import UploadButton from \"../../../components/UploadButton/UploadButton\";\r\n\r\n  export default {\r\n    name: \"DepartmentForm\",\r\n    components: {UploadButton},\r\n    props: {\r\n      useButton: {\r\n        type: Boolean,\r\n        default: false,\r\n      },\r\n      department: {\r\n        type: Object,\r\n        default() {\r\n          return {}\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        ruleValidate: {\r\n          name: [{required: true, message: '请输入名称', trigger: 'blur'}]\r\n        },\r\n        formData: {...this.defaultForm(), ...this.department},\r\n      }\r\n    },\r\n    methods: {\r\n      handleUpload(file) {\r\n        this.formData.file = file;\r\n        return false;\r\n      },\r\n      reset() {\r\n        this.formData = this.defaultForm();\r\n        this.$refs.upload.reset();\r\n      },\r\n      defaultForm() {\r\n        return {\r\n          name: null,\r\n          createdAt: new Date(),\r\n          file: null,\r\n          description: null\r\n        };\r\n      },\r\n      onOk() {\r\n        this.$refs.form.validate(valid => {\r\n          if (valid) {\r\n            this.$emit(\"on-form-ready\", obj2form(this.formData));\r\n            this.reset();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/iview-loader/index.js??ref--0-2!./DepartmentForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/iview-loader/index.js??ref--0-2!./DepartmentForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DepartmentForm.vue?vue&type=template&id=9fdf833c&scoped=true&\"\nimport script from \"./DepartmentForm.vue?vue&type=script&lang=js&\"\nexport * from \"./DepartmentForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9fdf833c\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n\r\nexport const getDepartmentApi = id => {\r\n  return request.get(`/api/department/${id}`)\r\n};\r\n\r\nexport const getDepartmentDetailsApi = id => {\r\n  return request.get(`/api/department/${id}/details`)\r\n};\r\n\r\nexport const getHeadOfficeApi = () => {\r\n  return request.get(`/api/department`)\r\n};\r\n\r\nexport const getPositionsOfApi = (departmentId) => {\r\n  return request.get(`/api/department/${departmentId}/positions`)\r\n};\r\n\r\nexport const getSubordinatesApi = (departmentId) => {\r\n  return request.get(`/api/department/${departmentId}/subordinates`)\r\n};\r\n\r\n// period + page, size\r\n// from, to + page, size\r\nexport const getWageStatisticsApi = (departmentId, period) => {\r\n  return request.get(`/api/department/${departmentId}/statistics`, { params: { period }})\r\n}\r\n\r\n// https://stackoverflow.com/a/38013585\r\nexport const setupDepartmentApi = (departmentId, formData) => {\r\n  return request.post(`/api/department`, formData, { params: { departmentId }})\r\n};\r\n\r\nexport const shutdownDepartmentApi = departmentId => {\r\n  return request.post(`/api/department/shutdown`, \"\" , { params: { departmentId }})\r\n};\r\n\r\nexport const updateDepartmentApi = (departmentId, formData) => {\r\n  return request.post(`/api/department/update`, formData, { params: { departmentId }})\r\n};\r\n\r\nexport const queryAdminApi = (entityType, entityId) => {\r\n  return request.get(`/api/department/admin`, { params: { entityType, entityId }})\r\n};\r\n\r\nexport const searchDepartmentApi = (params) => {\r\n  return request.get('/api/department/search', { params })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{attrs:{\"type\":\"flex\",\"align\":\"middle\",\"gutter\":8}},[(!!_vm.labelText)?_c('Col',{attrs:{\"span\":_vm.labelSpan}},[_c('div',{style:(!_vm.labelSpan && {width: _vm.labelWidth+'px'})},[_c('span',[_vm._v(_vm._s(_vm.labelText))])])]):_vm._e(),_c('Col',[_c('Upload',{ref:\"upload\",attrs:{\"show-upload-list\":false,\"action\":\"\",\"accept\":_vm.accept,\"before-upload\":_vm.handleUpload}},[_c('Button',{attrs:{\"disabled\":_vm.disabled,\"icon\":\"md-arrow-up\",\"type\":_vm.color}},[_vm._v(_vm._s(_vm.buttonHint))])],1)],1),(!!_vm.file)?_c('Col',[_c('Button',{attrs:{\"size\":\"small\",\"icon\":\"md-close\"},on:{\"click\":function($event){_vm.file=null}}})],1):_vm._e()],1),(!!_vm.file && _vm.showSelected)?_c('div',[_c('br'),_c('Alert',[_vm._v(\"已选择文件:\"+_vm._s(_vm.file.name))])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Row type=\"flex\" align=\"middle\" :gutter=\"8\">\r\n      <Col v-if=\"!!labelText\" :span=\"labelSpan\">\r\n        <div :style=\"!labelSpan && {width: labelWidth+'px'}\">\r\n          <span>{{ labelText }}</span>\r\n        </div>\r\n      </Col>\r\n      <Col>\r\n        <Upload ref=\"upload\"\r\n                :show-upload-list=\"false\"\r\n                action=\"\"\r\n                :accept=\"accept\"\r\n                :before-upload=\"handleUpload\">\r\n          <Button :disabled=\"disabled\" icon=\"md-arrow-up\" :type=\"color\">{{buttonHint}}</Button>\r\n        </Upload>\r\n      </Col>\r\n      <Col v-if=\"!!file\">\r\n        <Button size=\"small\" @click=\"file=null\" icon=\"md-close\"/>\r\n      </Col>\r\n    </Row>\r\n    <div v-if=\"!!file && showSelected\">\r\n      <br/>\r\n      <Alert>已选择文件:{{ file.name }}</Alert>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UploadButton\",\r\n  props: {\r\n    labelText: {\r\n      type: String,\r\n      default: '上传文件'\r\n    },\r\n    labelWidth: {\r\n      type: Number,\r\n      default: 50\r\n    },\r\n    accept: {\r\n      type: String,\r\n      default: '.txt'\r\n    },\r\n    buttonText: {\r\n      type: String,\r\n      default: '选择本地文件'\r\n    },\r\n    showSelected: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    labelSpan: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n    color: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  computed: {\r\n    buttonHint() {\r\n      return !!this.file ? '重新选择' : this.buttonText\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      file: null,\r\n      labelClazz: {\r\n        width: this.labelWidth\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleUpload(file) {\r\n      this.file = file;\r\n      this.$emit(\"on-file-ready\", file);\r\n      return false;\r\n    },\r\n    reset() {\r\n      this.file = null\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./UploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ref--0-2!./UploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadButton.vue?vue&type=template&id=7487a8df&scoped=true&\"\nimport script from \"./UploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7487a8df\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"编辑部门信息\")]),(!!_vm.department)?[_c('department-form',{attrs:{\"department\":_vm.department,\"use-button\":true},on:{\"on-form-ready\":_vm.updateDepartment}})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Card>\r\n    <p slot=\"title\">编辑部门信息</p>\r\n    <template v-if=\"!!department\">\r\n      <department-form\r\n          :department=\"department\"\r\n          @on-form-ready=\"updateDepartment\"\r\n          :use-button=\"true\"></department-form>\r\n    </template>\r\n  </Card>\r\n</template>\r\n\r\n<script>\r\n  import DepartmentForm from \"../DepartmentForm\";\r\n  import {getDepartmentApi, updateDepartmentApi} from \"../../../../api/department\";\r\n\r\n  export default {\r\n    components: {DepartmentForm},\r\n    data() {\r\n      return {\r\n        department: null,\r\n        departmentId: this.$route.query.departmentId\r\n      }\r\n    },\r\n    mounted() {\r\n      getDepartmentApi(this.departmentId).then(res => {\r\n        this.department = res.data\r\n      }).catch(e => this.$Notice.error({ title: `获取岗位信息失败${e.status}`, desc: e.data.message}))\r\n    },\r\n    methods: {\r\n      updateDepartment(formData) {\r\n        const id = this.departmentId;\r\n        updateDepartmentApi(id, formData).then(_ => {\r\n          this.$Notice.success({ title: \"更新部门成功\"})\r\n          this.$router.push({ name: 'DepartmentDetails', params: { id }})\r\n        }).catch(e => {\r\n          const title = \"更新部门失败\";\r\n          let desc = e.data.message\r\n          this.$Notice.error({ title, desc })\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/iview-loader/index.js??ref--0-2!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/iview-loader/index.js??ref--0-2!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=346cb250&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"346cb250\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}