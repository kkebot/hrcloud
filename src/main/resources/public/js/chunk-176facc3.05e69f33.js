(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-176facc3"],{2105:function(t,e,n){},"2db4":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e){return!t||t.length<=e?t||"":t.slice(0,e)+"..."}},"2fdb":function(t,e,n){"use strict";var r=n("5ca1"),a=n("d2c8"),i="includes";r(r.P+r.F*n("5147")(i),"String",{includes:function(t){return!!~a(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"386d":function(t,e,n){"use strict";var r=n("cb7c"),a=n("83a1"),i=n("5f1b");n("214f")("search",1,function(t,e,n,o){return[function(n){var r=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=o(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this),s=c.lastIndex;a(s,0)||(c.lastIndex=0);var l=i(c,u);return a(c.lastIndex,s)||(c.lastIndex=s),null===l?-1:l.index}]})},5147:function(t,e,n){var r=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(a){}}return!0}},6609:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[n("search-data",{attrs:{search:t.search,columns:t.queryEntity.columns,fields:t.queryEntity.fields,api:t.queryEntity.api},on:{"search-change":t.onChange}})],1)},a=[],i=n("cebc"),o=(n("a481"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-data",{ref:"table",attrs:{"load-data":t.loadData,columns:t.columns}},[n("Row",{attrs:{type:"flex",gutter:10}},[n("Col",[n("Select",{attrs:{placeholder:"选择字段"},on:{"on-change":t.changeKeyword},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},t._l(t.fields,function(e){return n("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.text))])}),1)],1),n("Col",[n("Input",{attrs:{icon:"ios-search",placeholder:"搜索内容"},on:{"on-click":t.onClickSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)],1)}),c=[],u=(n("386d"),n("f867")),s=n("b775"),l={components:{PageData:u["a"]},props:{search:{type:Object,default:function(){return{keyword:null,value:null}}},fields:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},api:{type:String}},data:function(){var t=this.search,e=t.keyword,n=t.value;return{keyword:e,value:n}},methods:{loadData:function(t,e,n){var r=this,a=this.keyword,i=this.value,o=this.api;a&&i&&o&&s["a"].get(o,{params:{keyword:a,value:i,page:t,size:e}}).then(function(e){var a=e.data,i=a.content,o=a.totalElements;r.$Notice.success({title:"第".concat(t+1,"页；一共").concat(o,"个结果")}),n(i,o)}).catch(function(t){return r.$Notice.error({title:"搜索失败(".concat(t.status,")"),desc:t.data.message})})},changeKeyword:function(t){this.value=null,this.$emit("search-change",{keyword:t})},onClickSearch:function(){this.$refs.table.resetPage();var t=this.keyword,e=this.value;this.$emit("search-change",{keyword:t,value:e})}}},d=l,f=n("2877"),p=Object(f["a"])(d,o,c,!1,null,"4537ea3a",null),h=p.exports,y=n("8454"),v=n("2db4"),m={components:{SearchData:h},data:function(){var t=this,e=t.$route.query,n=e.entity,r=e.keyword,a=e.value;return{entity:n,search:{keyword:r,value:a},entities:{employee:{fields:[{key:"id",text:"编号"},{key:"name",text:"姓名"},{key:"credential",text:"身份证"},{key:"positionId",text:"岗位编号"},{key:"departmentId",text:"部门编号"}],columns:[{title:"工号",key:"id"},{title:"姓名",key:"name"},{title:"性别",key:"gender"},{title:"证件号码",key:"credential",render:function(t,e){var n=e.row;return t("span",Object(v["a"])(n.credential,8))}},{title:"入职时间",key:"entryTime",render:function(t,e){var n=e.row;return t("span",Object(y["b"])(n.entryTime))},exportData:function(t){return Object(y["b"])(t.entryTime)}},{title:"职务",key:"mainPosition",render:function(e,n){var r=n.row,a=r.mainPosition;return a?e("Button",{props:{size:"small",type:"primary"},on:{click:function(){return t.$router.push({name:"PositionDetails",params:{id:a.id}})}}},Object(v["a"])(Object(y["e"])(r.mainPosition),5)):e("span","/")},exportData:function(t){return Object(y["e"])(t.mainPosition)}},{title:"薪资级别",key:"scale",render:function(t,e){var n=e.row;return t("Tag",Object(y["h"])(n.scale))},exportData:function(t){return Object(y["h"])(t.scale)}},{title:"状态",key:"status",render:function(t,e){var n=e.row;return t("Tag",{props:{color:n.status?"success":"error"}},Object(y["d"])(n.status))},exportData:function(t){return Object(y["d"])(t.status)}},{title:"操作",key:"operations",render:function(e,n){var r=n.row;return e("Button",{props:{size:"small",icon:"md-person"},on:{click:function(){return t.$router.push({name:"EmployeePanel",params:{id:r.id}})}}})},noExport:!0}],api:"/api/employee/search"},department:{fields:[{key:"id",text:"部门编号"},{key:"name",text:"部门名称"}],columns:[{key:"id",title:"部门编号"},{key:"name",title:"部门名称"},{key:"createdAt",title:"设立时间",render:function(t,e){var n=e.row;return t("span",Object(y["b"])(n.createdAt))}},{key:"status",title:"状态",render:function(t,e){var n=e.row;return t("Tag",{props:{color:n.status?"success":"error"}},Object(y["c"])(n.status))}},{key:"operations",title:"操作",render:function(e,n){var r=n.row;return e("ButtonGroup",{props:{size:"small"}},[e("Button",{props:{size:"small",icon:"md-git-branch"},on:{click:function(){return t.$router.push({name:"Management",query:{departmentId:r.id}})}}}),e("Button",{props:{size:"small",icon:"md-arrow-forward",type:"primary"},on:{click:function(){return t.$router.push({name:"DepartmentDetails",params:{id:r.id}})}}})])},noExport:!0}],api:"/api/department/search"},position:{fields:[{key:"id",text:"岗位编号"},{key:"name",text:"岗位名称"}],columns:[{key:"id",title:"岗位编号"},{key:"name",title:"岗位名称"},{key:"createdAt",title:"设立时间",render:function(t,e){var n=e.row;return t("span",Object(y["b"])(n.createdAt))}},{key:"expectedCount",title:"编制人数",render:function(t,e){var n=e.row;return t("Tag",n.expectedCount)}},{key:"type",title:"岗位类型",render:function(t,e){var n=e.row;return t("Tag",n.type)}},{key:"status",title:"状态",render:function(t,e){var n=e.row;return t("Tag",{props:{color:n.status?"success":"error"}},Object(y["g"])(n.status))}},{key:"operations",title:"操作",render:function(e,n){var r=n.row;return e("Button",{props:{size:"small",icon:"md-arrow-forward",type:"primary"},on:{click:function(){return t.$router.push({name:"PositionDetails",params:{id:r.id}})}}})},noExport:!0}],api:"/api/position/search"}}}},computed:{queryEntity:function(){return this.entities[this.entity]}},methods:{onChange:function(t){var e=this.entity;this.$router.replace({name:"SearchResult",query:Object(i["a"])({},t,{entity:e})})}}},g=m,k=Object(f["a"])(g,r,a,!1,null,"22809b9d",null);e["default"]=k.exports},6762:function(t,e,n){"use strict";var r=n("5ca1"),a=n("c366")(!0);r(r.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8454:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"h",function(){return a}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"b",function(){return s}),n.d(e,"f",function(){return l});n("7f7f");var r=function(t){return t?"".concat(t.name,"(").concat(t.id,")"):"/"},a=function(t){return t?"￥".concat(t.salary,"(").concat(t.id,")"):"/"},i=function(t){return t?"在职":"离职"},o=function(t){return t?"正在生效":"已撤销"},c=function(t){return t?"正在生效":"已终止"},u=o,s=function(t){return new Date(t).toLocaleString()},l=function(t){var e=new Date(t),n=e.getUTCMonth()+1,r=e.getUTCFullYear();return r+"年 "+n+"月"}},a481:function(t,e,n){"use strict";var r=n("cb7c"),a=n("4bf8"),i=n("9def"),o=n("4588"),c=n("0390"),u=n("5f1b"),s=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,y){return[function(r,a){var i=t(this),o=void 0==r?void 0:r[e];return void 0!==o?o.call(r,i,a):n.call(String(i),r,a)},function(t,e){var a=y(n,t,this,e);if(a.done)return a.value;var d=r(t),f=String(this),p="function"===typeof e;p||(e=String(e));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var k=[];while(1){var b=u(d,f);if(null===b)break;if(k.push(b),!m)break;var w=String(b[0]);""===w&&(d.lastIndex=c(f,i(d.lastIndex),g))}for(var x="",E=0,O=0;O<k.length;O++){b=k[O];for(var $=String(b[0]),j=s(l(o(b.index),f.length),0),C=[],P=1;P<b.length;P++)C.push(h(b[P]));var S=b.groups;if(p){var D=[$].concat(C,j,f);void 0!==S&&D.push(S);var _=String(e.apply(void 0,D))}else _=v($,f,j,C,S,e);j>=E&&(x+=f.slice(E,j)+_,E=j+$.length)}return x+f.slice(E)}];function v(t,e,r,i,o,c){var u=r+t.length,s=i.length,l=p;return void 0!==o&&(o=a(o),l=f),n.call(c,l,function(n,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":c=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return n;if(l>s){var f=d(l/10);return 0===f?n:f<=s?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):n}c=i[l-1]}return void 0===c?"":c})}})},d2c8:function(t,e,n){var r=n("aae3"),a=n("be13");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(t))}},dd99:function(t,e,n){"use strict";var r=n("2105"),a=n.n(r);a.a},f867:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("Col",{attrs:{span:"12"}},[n("Row",{attrs:{type:"flex",gutter:5}},[n("Col",[t.useExport?n("Button",{attrs:{type:"success"},on:{click:t.onExport}},[t._v("导出CSV")]):t._e()],1),n("Col",[n("Select",{attrs:{multiple:"","max-tag-count":3,placeholder:"选择显示列"},on:{"on-change":t.showColumns},model:{value:t.keys,callback:function(e){t.keys=e},expression:"keys"}},t._l(t.columns,function(e){return n("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])}),1)],1)],1)],1),n("Col",[t._t("default")],2)],1),n("br"),n("Table",{ref:"table",staticClass:"query-list__table",attrs:{columns:t.displayed,data:t.content},on:{"on-row-dblclick":function(e){return t.$emit("on-db-click",e)}}}),n("br"),n("Row",{attrs:{type:"flex",justify:"end"}},[n("Col",[n("Page",{attrs:{current:t.page,total:t.totalElements,"page-size":t.size,"show-sizer":"","show-total":""},on:{"on-change":function(e){return t.onPage(e,t.size)},"on-page-size-change":function(e){return t.onPage(t.page,e)}}})],1)],1)],1)},a=[],i=(n("6762"),n("2fdb"),n("ac6a"),{name:"PageData",props:{columns:{type:Array,default:function(){return[]}},loadData:{type:Function,default:function(){return function(t,e,n){n([],0)}}},useExport:{type:Boolean,default:!0}},data:function(){return{keys:this.columns.map(function(t){return t.key}),displayed:this.columns.slice(),page:1,size:10,totalElements:1,content:[]}},mounted:function(){this.resetPage()},methods:{onExport:function(){var t=this;this.$refs.table.exportCsv({filename:"temp.csv",original:!1,columns:this.displayed,data:this.content.map(function(e){var n={};return t.displayed.forEach(function(t){t.noExport||(t.exportData?n[t.key]=t.exportData(e):n[t.key]=e[t.key])}),n})})},showColumns:function(){var t=this;this.displayed=this.columns.filter(function(e){return t.keys.includes(e.key)})},resetPage:function(){this.onPage(1,10)},onPage:function(t,e){this.page=t,this.size=e,this.fetchPage()},fetchPage:function(){var t=this,e=this.page,n=this.size;this.loadData(e-1,n,function(e,n){t.totalElements=n,t.content=e})},getData:function(){return this.content}}}),o=i,c=(n("dd99"),n("2877")),u=Object(c["a"])(o,r,a,!1,null,"8d711b90",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-176facc3.05e69f33.js.map